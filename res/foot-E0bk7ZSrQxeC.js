(function(e){function t(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function n(e,t){return st.test(t)?n(e,Q):e.currentStyle?e.currentStyle[t]||"":window.getComputedStyle?window.getComputedStyle(e,null)[t]:""}function i(e,t,i){if((f(t)||(t=d(t),f(t)))&&x(i)&&(!isNaN(i)||"number"!=typeof i)){if(9>I&&"opacity"==t){var r=n(e,"filter")||"",o=/alpha\([^\)]*\)/;return i="alpha(opacity="+Math.round(100*parseFloat(i))+")",e.style.filter=o.test(r)?r.replace(o,i):i,void 0}if(st.test(t))return e.style[d(Q)]=t+"("+i+")",void 0;isNaN(i)||!i||E[t]||(i+="px");try{e.style[t]=i}catch(s){u(s)}}}function r(e,t){var n=t?t[B._idname]:"",i="b$Event"+(n||"");return e[i]=e[i]||function(n){var i=e.call(t||this,B._fixe(n));return i===!1&&n.preventDefault(),i}}function o(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function s(e){var t,n,i,r={};return e?(w(e.split("\n"),function(e){i=e.indexOf(":"),t=j(e.substr(0,i).trim()),n=e.substr(i+1).trim(),t&&(r[t]?r[t]+=", "+n:r[t]=n)}),r):r}function a(t){var n=_(t)?t:e;return function(e){return n||(n=s(t)),e?n[j(e)]||null:n}}function c(e){if(null==e||t(e))return!1;var n=e.length;return 1===e.nodeType&&n?!0:C(e)||k(e)||0===n||"number"==typeof n&&n>0&&n-1 in e}function u(e){if("undefined"!=typeof console&&x(console.error)){if(!/firefox/i.test(L)&&e instanceof Error)if(e.stack){var t=e.stack;e=e.message&&-1===t.indexOf(e.message)?"Error: "+e.message+"\n"+t:t}else e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line);console.error(e)}}function l(e){return j(e.replace(/^ms([A-Z])/,"-ms-$1").replace(/(^|[a-z])([A-Z])/g,"$1-$2"))}function d(e){return e.replace(/-([a-z])/g,function(e,t){return S(t)}).replace(/^Ms([A-Z])/,"ms$1")}function f(e){return"opacity"==e||st.test(e)||x(X.style[e])}function h(e){return K?K+e:j(e)}function p(e,t,n){var i=e.toString().match(/[\-\d]+/g)||[],r=0;return(t||0).toString().replace(/[\-\d]+/g,function(e){var t=parseInt(i[r++],10)||0,o=t*(1-n)+e*n;return Math.abs(e-t)>10?Math.round(o):o})}function m(){if(!ht){var e=document.body;if(!e)return setTimeout(m,13),void 0;(v.needPolyfill||lt.ref.exe).then(function(){if(v.needPolyfill)throw"Bowlder polyfill failed.";/debug=(http:\S+?)($|&|#)/.test(location.href)&&(v.debug=RegExp.$1),ht=!0,pt.resolve()})}}if(!this.bowlder){var v=this.bowlder=function(e,n){return e&&x(e)?C(e)?new ft(/^\s*/g,"$1body>");var r=b.call(t.querySelectorAll(e));return i&&(n?t.id=n:t.removeAttribute("id")),r}},A=/[;\s]+/,R={},q={},D={},P={},F=function(e,t){for(var n,i=e.target,r=this,o={},s=function(t,s){o[s]||(o[s]=O.cssQuery(s,r)),o[s].indexOf(i)>-1&&w(t,function(t){n!==!1&&(n=t.call(i,e))})};i&&i!=r;){if(w(t,s),n===!1){e.preventDefault();break}i=i.parentNode}},H={tfoot:"table",thead:"table",tbody:"table",tr:"tbody",th:"tr",td:"tr",option:"select"},z=function(e,t){var n=document.createElement(e);return n.innerHTML=t,n},B=v.dom={_fixe:function(e){var t=["clientX","clientY","pageX","pageY"];if(e.touches)switch(e.type){case"touchstart":w(t,function(t){e[t]=e.touches[0][t]});break;case"touchend":case"touchmove":w(t,function(t){e[t]=e.changedTouches[0][t]})}return e},_on:function(e,t,n,i){e.addEventListener(t,n,i||!1)},_off:function(e,t,n,i){e.removeEventListener(t,n,i||!1)},_idname:"_b$id",_nodeId:function(e){return e[B._idname]||(e[B._idname]=++g)},delegate:function(e,t,n,i){if(_(n))w(n,function(n,i){B.delegate(e,t,i,n)});else if(C(n)){var o=B._nodeId(e),s=q[o]||(q[o]={});w(t.split(A),function(t){if(t){var o=s[t];if(!o){o=s[t]={};var a=r(function(t){F.call(e,t,o)});B._on(e,t,a)}if(o[n]){if(o[n].indexOf(i)>-1)return}else o[n]=[];o[n].push(i)}})}},undelegate:function(e,t,n,i){var r=e[B._idname];if(_(n))w(n,function(n,i){B.undelegate(e,t,i,n)});else if(C(n)){var o=q[r]||(q[r]={});w(t.split(A),function(e){if(e){var t=o[e];if(t[n]){for(var r=0;r<t[n].length;r++)if(t[n][r]==i){t[n].splice(r,1);break}0===t[n].length&&delete t[n]}}})}},bind:function(e,t,n,i){var="" o="B._nodeId(e);n=r(n,9">I?e:"");var s=R[o]||(R[o]={});w(t.split(A),function(t){if(t){if(s[t]){if(s[t].indexOf(n)>-1)return}else s[t]=[];if(s[t].push(n),B._on(e,t,n,i),D[t]){var r=P[o]||(P[o]={});r[t]||(r[t]=D[t].call(e,function(n,i){B.trigger(i||e,t,!!i,n)})||!0)}}})},unbind:function(e,t,n,i){var o=e[B._idname];if(o){var s=R[o];s&&(n?(n=r(n,9>I?e:""),w(t.split(A),function(t){if(t){B._off(e,t,n,i);for(var r=0;r<s[t].length;r++)s[t][r]==n&&s[t].splice(r--,1)}})):w(t.split(a),function(t){t&&(w(s[t],function(n){b._off(e,t,n,i)}),delete s[t])}))}},before:function(e,t){return="" c(e)&&(e="B.create(e)),t&&t.parentNode&&t.parentNode.insertBefore(e,t),e},after:function(e,t){if(C(e)&&(e=B.create(e)),t&&t.parentNode){var" n="t.parentNode,i=t.nextSibling;i?n.insertBefore(e,i):n.appendChild(e)}return" e},replace:function(e,t){return="" r="document.createEvent("MouseEvents");r.initEvent(t,n||!1,!1),_(i)&&v.extend(r,i),e.dispatchEvent(r)},show:function(e){e.style.display=e.olddisplay||"","none"==n(e,"display")&&(e.style.display="block")},hide:function(e){e.olddisplay=e.olddisplay||n(e,"display"),e.style.display="none"},toggle:function(e){B["none"==B.css(e,"display")?"show":"hide"](e)},css:function(e,t,r){if(C(t))if(t.indexOf(":")">-1)e.style.cssText+=";"+t;else{if(!x(r)){var o=d(t);return f(o)?n(e,o):e[o]}i(e,t,r)}else if(_(t)){var s="";w(t,function(t,n){return st.test(n)?(s+=n+"("+t+") ",void 0):(n=d(n),f(n)?i(e,n,t):e[n]=t,void 0)}),s&&(e.style[d(Q)]=s)}},val:function(e,t){if("input"==j(e.tagName)){var n=j(e.getAttribute("type"));if("checkbox"==n)return B.attr(e,"checked",t)}var i=v.widget(e);return i?i.val(t):x(t)?(e.value=t,void 0):e.value},attr:function(e,t,n){if(!e||!e.nodeType)return null;if(t=j(t),N[t]){if(!x(n))return e[t]?!0:!1;e[t]=!!n,n?e.setAttribute(t,t):e.removeAttribute(t)}else{if(!x(n))return e.getAttribute(t,2);M[t]?M[t](e,n):e.setAttribute(t,n)}},create:function(e,t){if(!t&&/^\w+$/.test(e))return document.createElement(e);var n;/<(\w+) .test(e)?n="z(H[j(RegExp.$1)],e):(n=X,n.innerHTML=e);for(var" i="document.createDocumentFragment(),r=n.firstChild;r;)i.appendChild(r),r=n.firstChild;return" i},remove:function(e){e.parentnode&&e.parentnode.removechild(e)},pos:function(e,t){var="" n="{left:0,top:0};if(!e||1!==e.nodeType)return" n;if(n.left="e.offsetLeft,n.top=e.offsetTop,!t)for(;e.offsetParent;)e=e.offsetParent,n.left+=e.offsetLeft,n.top+=e.offsetTop;return" n}};v.cookie="{get:function(e){for(var" t="document.cookie.split(";" "),n="0;n<t.length;n++){var" decodeuricomponent(i[1])}catch(r){return""}}return""},remove:function(e,t,n){document.cookie="e+"=1;" path="+(n||" ")+(t?";="" domain="+t:" ")+";expires="Fri," 02-jan-1970="" 00:00:00="" gmt"},set:function(e,t,n,i,r,o){r||(r="/" ),$(n)||(n="365),n=864e5*n,document.cookie=e+"="+encodeURIComponent(t)+(n?";" expires="+new Date(+new Date+n).toGMTString():" ")+(i?";="" ")+";="" ;="" secure":"")}},v.event="function(e,t){return" t?(d[e]="t,void" 0):!!d[e]};var="" y="O.buildUrl=function(e,t){var" w(t,function(e,t){null!="e&&(k(e)||(e=[e]),w(e,function(e){_(e)&&(e=JSON.stringify(e)),n.push(o(t)+"="+o(e))}))}),n.length&&(e+=(-1==e.indexOf("?")?"?":"&")+n.join("&")),e},X=document.createElement("div"),U=v.classList=X.classList?{contains:function(e,t){return" e.classlist&&e.classlist.contains(t)?!0:!1},add:function(e,t){e.classlist&&w(t.split(="" \s+="" ),function(t){t&&e.classlist.add(t)})},remove:function(e,t){e.classlist&&w(t.split(="" ),function(t){t&&e.classlist.remove(t)})}}:{check:function(e,t){return="" 1!="=e.nodeType||"string"!=typeof" e.classname||"string"!="typeof" t?!1:!0},contains:function(e,t){return="" this.check(e,t)&&new="" regexp("\\b"+t+"\\b").test(e.classname)},add:function(e,t){this.check(e,t)&&!this.contains(e,t)&&(e.classname="e.className.replace(/\s*$/,"" "+t))},remove:function(e,t){this.check(e,t)&&this.contains(e,t)&&(e.classname="e.className.replace(new" regexp("\\b"+t+"\\b\\s*","g"),""))}};u.toggle="function(e,t){this.contains(e,t)?this.remove(e,t):this.add(e,t)};var" w,k,q,j,z,v,g,et,tt,nt,it,rt="v.extend=function(){var" e="1<=arguments.length?b.call(arguments,0):[],t=!1;"boolean"==typeof" e[0]&&(t="e.shift());var" n&&"object"="=typeof" n&&w(e,function(e){e!="=n&&w(e,function(e,i){t&&_(e)?rt(t,n.hasOwnProperty(i)?n[i]:n[i]={},e):n[i]=e})}),n},ot="",st=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,at={},ct=function(t){return" w="window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,30)},w(t,function(t,n){X.style[t+"TransitionProperty"]!==e&&(ot="-"+j(t)+"-",K=n)}),Q=ot+"transform",at[J=ot+"transition-property"]=at[Z=ot+"transition-duration"]=at[G=ot+"transition-delay"]=at[V=ot+"transition-timing-function"]=at[et=ot+"animation-name"]=at[tt=ot+"animation-duration"]=at[it=ot+"animation-delay"]=at[nt=ot+"animation-timing-function"]="",O.supportCSS3=K!==e||X.style.transitionProperty!==e,{off:!O.supportCSS3,speeds:{_default:300,fast:200,slow:600},cssPrefix:ot,transitionEnd:h("TransitionEnd"),animationEnd:h("AnimationEnd")}}({Webkit:"webkit",Moz:"",O:"o",Ms:"ms"}),ut={};v.on=function(e,t){var" c(e)?(n[e]||(n[e]="[]),n[e].push(t),this):this},v.off=function(e,t){if(C(e)){var" this;if(!t)return="" delete="" n[e],this;for(var="" r="0,o=i.length;o">r;r++)if(i[r]===t){i.splice(r,1);break}}return this},v.emit=function(){var e=1<=arguments.length?b.call(arguments,0):[],t=e.shift();if(c(t)){var n,i="this,r=i.$msg||ut;w(t.split(/\s+/),function(t){var" o="r[t];if(o)for(var" s="0,a=o.length;a">s&&(n=o[s],n.apply(i,e)!==!1);s++);})}};var lt=v.$q=function(){function t(e){return e&&T(e.then)?e:{then:function(t){var n=r();return n.resolve(t(e)),n.promise}}}function n(e){return e}function i(e){return o(e)}var r=function(){var s,a=[],c={resolve:function(n){if(a){var i=a;a=e,s=t(n),w(i,function(e){s.then(e[0],e[1],e[2])})}},reject:function(e){c.resolve(o(e))},notify:function(e){a&&w(a,function(t){t[2](e)})},promise:{then:function(e,t,o){var c=r(),l=function(t){try{c.resolve((T(e)?e:n)(t))}catch(i){c.reject(i),u(i)}},d=function(e){try{c.resolve((T(t)?t:i)(e))}catch(n){c.reject(n),u(n)}},f=function(e){try{c.notify((T(o)?o:n)(e))}catch(t){u(t)}};return a?a.push([l,d,f]):s.then(l,d,f),c.promise},"catch":function(e){return this.then(null,e)},"finally":function(e){function t(e,t){return new dt(function(n,i){t?n(e):i(e)})}function i(i,r){var o=null;try{o=(e||n)()}catch(s){return t(s,!1)}return o&&T(o.then)?o.then(function(){return t(i,r)},function(e){return t(e,!1)}):t(i,r)}return this.then(function(e){return i(e,!0)},function(e){return i(e,!1)})}}};return c},o=function(e){return{then:function(t,n){var o=r();try{o.resolve((T(n)?n:i)(e))}catch(s){o.reject(s),u(s)}return o.promise}}},s=function(e){var n=r(),i=0,o=k(e)?[]:{};return w(e,function(){i++}),w(e,function(e,r){t(e).then(function(e){o.hasOwnProperty(r)||(o[r]=e,--i||n.resolve(o))},function(e){o.hasOwnProperty(r)||n.reject(e)})}),0===i&&n.resolve(o),n.promise};return t.exe={then:function(e){return e()}},{defer:r,reject:o,all:s,ref:t}}(),dt=window.Promise;dt||(dt=function(e){var t=lt.defer();return T(e)&&e(t.resolve,t.reject),t.promise},dt.all=lt.all,dt.reject=lt.reject),v.Promise=dt,v.ajax=function(){function n(t){function n(e,t,n){return T(n)?n(e,t):(w(n,function(n){e=n(e,t)}),e)}function i(e){var t=rt(e,{data:n(e.data,e.headers,r.transformResponse)});return s(e.status)?t:lt.reject(t)}var r={transformRequest:h.transformRequest,transformResponse:h.transformResponse},c=h.headers,u=rt({},c.common,c[j(t.method)],t.headers);rt(r,t),r.headers=u,r.method=S(r.method);for(var l=function(e){u=e.headers;var t="";return"GET"==e.method&&_(e.data)?e.url=Y(e.url,e.data):t=n(e.data,a(u),e.transformRequest),x(e.data)||w(u,function(e,t){"content-type"===j(t)&&delete u[t]}),o(e,t,u).then(i,i)},d=[l,e],f=lt.ref(r);d.length;){var p=d.shift(),m=d.shift();f=f.then(p,m)}return f.success=function(e){return f.then(function(t){e(t.data,t.status,t.headers,r)}),f},f.error=function(e){return f.then(null,function(t){e(t.data,t.status,t.headers,r)}),f},f}function i(){w(arguments,function(e){n[e]=function(t,i){return n(rt(i||{},{win:this,method:e,url:t}))}})}function r(){w(arguments,function(e){n[e]=function(t,i,r){return n(rt(r||{},{win:this,method:e,url:t,data:i}))}})}function o(e,t,i){function r(){var t=n.pendingRequests.indexOf(e);-1!==t&&n.pendingRequests.splice(t,1)}var o=Y(e.url,e.params);n.pendingRequests.push(e);var c=new dt(function(n,r){function c(t,i,o){t=Math.max(t,0),(s(t)?n:r)({data:i,status:t,headers:a(o),config:e})}m.call(e.win,e.method,o,t,c,i,e.timeout,e.responseType)});return c.then(r,r),c}function s(e){return e>=200&&300>e}function c(e){return 6>=I||9>I&&"patch"===j(e)?new this.ActiveXObject("Microsoft.XMLHTTP"):new this.XMLHttpRequest}function u(e,n){function i(e,t,n){function i(){o.onreadystatechange=o.onload=o.onerror=null,t&&t();try{r.removeChild(o)}catch(e){}}var r=9>I?document.getElementsByTagName("head")[0]:document.body||document.head||document.getElementsByTagName("head")[0]||document.documentElement,o=document.createElement("script");return 9>I?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&i()}:o.onload=o.onerror=i,o.charset=n&&n.charset||"utf-8",o.src=e,r.appendChild(o),i}var r=-1;return function(o,s,a,u,l,d,f){function h(){m=r,v&&v(),b&&b.abort()}function p(t,n,i,r){_&&e.cancel(_),v=b=null,n=0===n?i?200:404:n,n=1223==n?204:n,t(n,i,r)}var m,v,g=t(this)?this:window;if("require"==j(o))v=i(s,function(){p(u,200)},l);else if("jsonp"==j(o)){var y="_"+(n.counter++).toString(36);n[y]=function(e){n[y].data=e},v=i(s.replace("CALLBACK","bowlder.cb."+y),function(){n[y].data?p(u,200,n[y].data):p(u,m||-2),delete n[y]})}else{var b=c.call(g,o);b.open(o,s,!0),w(l,function(e,t){x(e)&&b.setRequestHeader(t,e)}),b.onreadystatechange=function(){if(b&&4==b.readyState){var e=null,t=null;m!==r&&(t=b.response||b.responseText,e=b.getAllResponseHeaders()),p(u,m||b.status,t,e)}},f&&(b.responseType=f),b.send(a||null)}if(d>0)var _=e(h,d);else d&&d.then&&d.then(h)}}var l=/^\s*(\[|\{[^\{])/,d=/[\}\]]\s*$/,f={"Content-Type":"application/json;charset=utf-8"},h=n.defaults={transformResponse:[function(e){return C(e)&&l.test(e)&&d.test(e)&&(e=JSON.parse(e,!0)),e}],transformRequest:[function(e){return _(e)&&!v.isFile(e)?JSON.stringify(e):e}],headers:{common:{Accept:"application/json, text/plain, */*"},post:rt({},f),put:rt({},f),patch:rt({},f)}},p=null,m=u(p,v.cb,document);return n.pendingRequests=[],i("get","delete","head","jsonp","require"),r("post","put"),n}();var ft=function(e){e?c(e)||(e=[e]):e=[];for(var t=this.length=e.length,n=0;t>n;n++)this[n]=e[n]};v.fn=ft.prototype={push:function(e){this[this.length]=e,this.length++},eq:function(e){return 1==this.length?this:this[e]?new ft(this[e]):null},each:function(e){for(var t=0,n=this.length;n>t;t++)e.call(this[t],this[t],t);return this},parent:function(){var e=this[0];return v(e?e.parentNode:[])},children:function(){var e=[];return this.each(function(){w(this.children,function(t){e.push(t)})}),v(e)},closest:function(e){var t,n=this[0],i=[];if(n){t=n.parentNode;for(var r=O.cssQuery(e);t&&1==t.nodeType;){if(r.indexOf(t)>-1){i=t;break}t=t.parentNode}}return v(i)},html:function(e){return x(e)?this.each(function(){this.innerHTML=e}):this[0]?this[0].innerHTML:""},hasClass:function(e){var t=!1;return this.each(function(){t=t||U.contains(this,e)}),t},addClass:function(e){return this.each(function(){U.add(this,e)})},toggleClass:function(e){return this.each(function(){U.toggle(this,e)})},removeClass:function(e){return this.each(function(){U.remove(this,e)})},append:function(e,t){var n=this;if(C(e))e=B.create(e);else if(c(e))return w(b.call(e),function(e){n.append(e,t)}),n;return this.each(function(){this.appendChild(t?e.cloneNode(!0):e)})},appendTo:function(e){return!e.nodeType&&e[0]&&(e=e[0]),1!==e.nodeType?this:this.each(function(){e.appendChild(this)})},prependTo:function(e){return!e.nodeType&&e[0]&&(e=e[0]),1!==e.nodeType?this:this.each(function(){e.insertBefore(this,e.firstChild)})},stop:function(){return this.startTime=0,this},animate:function(t,n,i,r,o){return T(n)&&(r=n,i=e,n=e),T(i)&&(r=i,i=e),_(n)&&(i=n.easing,r=n.complete,o=n.delay,n=n.duration),n&&(n=("number"==typeof n?n:ct.speeds[n]||ct.speeds._default)/1e3),o&&(o=parseFloat(o)/1e3),this.anim(t,n,i,r,o)},anim:function(t,n,i,r,o){if(!this[0])return this;var s,a,c={},u={},h="",m=this,v=ct.transitionEnd,g=!1,y=!1,b=!1;if(n===e&&(n=ct.speeds._default/1e3),o===e&&(o=0),"string"==typeof t)c[et]=t,c[tt]=n+"s",c[it]=o+"s",c[nt]=i||"linear",v=ct.animationEnd;else{a=[];for(s in t)st.test(s)?h+=s+"("+t[s]+") ":(c[s]=t[s],a.push(l(s)));if(h&&(c[Q]=h,a.push(Q)),n>0&&_(t))for(s in c)ct.off||!f(d(s))?(y=!0,u[s]=this.css(s)):(b=!0,c[J]=a.join(", "),c[Z]=n+"s",c[G]=o+"s",c[V]=i||"linear")}var x=function(){g=!0,m.css(at),r&&r.call(this)};if(n>0&&setTimeout(function(){g||x.call(m)},1e3*n+25),y){var $=this.startTime=new Date,T=function(){if(m.startTime==$){var e=new Date-$,t=e/n/1e3;if(1e3*n>e){var i={};w(u,function(e,n){i[n]=p(e,c[n],t)}),m.css(i),W(T)}else m.css(c)}};T()}return ct.off||(this[0].clientLeft,this.css(c)),this},attr:function(e,t){var n=this[0];return n&&C(e)?x(t)?w(this,function(n){B.attr(n,e,t)}):B.attr(n,e):null},data:function(e,t){return this.attr("data-"+e,t)},val:function(e){var t=this[0];return t?x(e)?w(this,function(t){B.val(t,e)}):B.val(t):null},css:function(e,t){var n=this[0];if(!n)return this;var i=B.css(n,e,t);if(x(i))return i;for(var r=1;r<this.length;r++)b.css(this[r],e,t);return this},find:function(e){var="" t="[];return" w(this,function(n){t="t.concat(O.cssQuery(e,n))}),v(t)}},w(["delegate","undelegate","bind","unbind","remove","show","hide","toggle","trigger"],function(e){v.fn[e]=function(){var" this.each(function(){b[e].apply(this,[this].concat(t))})}}),w(["focus","blur","submit"],function(e){v.fn[e]="function(){return" this.each(function(){this[e]()})}}),w(["before","after"],function(e){v.fn[e]="function(t,n){return!t.nodeType&&t[0]&&(t=t[0]),1!==t.nodeType?this:(n?this.each(function(){B[e](t.cloneNode(!0),this)}):B[e](t,this[0]),this)},v.fn[d("insert-"+e)]=function(t){return!t.nodeType&&t[0]&&(t=t[0]),1!==t.nodeType?this:this.each(function(){B[e](this,t)})}});var" ht,pt="lt.defer();if(v.ready=function(e,t){var" n="pt.promise;if(T(e))t=e;else" if(k(e)){var="" i="[];w(e,function(e){i.push(e.ready())}),n=lt.all(i)}return" t(t)&&n.then(function(e){try{t.call(document,e)}catch(n){u(n)}}),n},9="">I&&(v.needPolyfill=v.ajax.require("http://img2.cache.netease.com/f2e/lib/bowlder_polyfill.js")),"complete"===document.readyState)return setTimeout(m),void 0;if(document.addEventListener)document.addEventListener("DOMContentLoaded",m,!1),window.addEventListener("load",m,!1);else if(document.attachEvent){var mt=function(){"complete"==document.readyState&&m()};document.attachEvent("onreadystatechange",mt),window.attachEvent("onload",mt)}}}).call(this),function(e,t){function n(e){return"object"==typeof e&&e&&!e.alert?JSON.stringify(e):e}function i(e){return 1==e.nodeType&&""===e.innerHTML.replace(/<!--[\s\S]*?-->/g,"").replace(/^\s+/,"")}function r(e,t,n,i){if(1!==e.nodeType)return e;var o=document.body;if((e==o||i)&&(e=t(e),!e))return!1;for(var s,a=e.firstChild;a;){var c=a.nodeType,u=a.nextSibling;1==c&&t?(s=t(a),s&&(r(s,t,n),u=s.nextSibling)):3==c&&n&&n(a),a=u}return e}function o(e){var t,n,i,r={},o=e.outerHTML;if(o)for(var s=0,a=/((\S+?)=(['"])(.*?)\3|[^>\s]+)\s*(\/?\s*>)?/g;t=a.exec(o);){if(n=t[2],i=t[4],!n){var c=t[1].split("=");n=c[0],i=c[1]||""}if(s++&&(r[n]=i.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<")),t[5])break}else if(e.attributes)for(var="" u="0,l=e.attributes.length;l">u;u++){var d=e.attributes[u];r[d.name]=d.value}return r}function s(t,n){var i=pt._defers,r=[];return n=n||t.getAttribute("ne-plugin"),n&&R(n.trim().split(S),function(n){if(n=l(n),/\.css$/i.test(n))pt.createLink(n);else{var o=(i[n]||pt.makeDefer(n)).promise;r.push(o.then(function(n){n.fn.apply(y({$root:e(t)},t.getAttribute("ne-plugin-state")),n.depInject)}))}}),H.all(r)}function a(t,n,i){return e.isRegExp(n)?n.test(t):i?t===n:t.indexOf(n)>-1}function c(){}function u(e){return tt.setAttribute("href",e),{href:tt.href,host:tt.host,pathname:"/"===tt.pathname.charAt(0)?tt.pathname:"/"+tt.pathname}}function l(t,n){var i="";if(n&&0===n.indexOf("@")&&(n=""),/^([a-z]+\!)(\S+)/.test(t)&&(i=RegExp.$1,t=RegExp.$2),0!==t.indexOf("http")&&!/^[\!\@]/.test(t))if(0!==t.indexOf("/")){var r=n||nt.pathname;for(/\/[^\/]+$/.test((n||nt.href||"").replace(/[#\?].*/,""))&&(r=r.replace(ot,""));rt.test(t);)t=RegExp.$1,r=r.replace(ot,"");t=r+t}else if(D(n)&&/(.*\/\/\S+?)\//.test(n)){var o=RegExp.$1;t=o+t}return e.debug&&-1==t.indexOf("cache.netease")&&(t=t.replace(/https?:\/\/.*?\//,"/").replace(/^(!)?\//,"$1"+e.debug+"/")),i+t.replace(/[^\/]*?\/\.\.\//g,"").replace(/\/\.\//g,"/")}function d(){this._readyDefer=H.defer(),this._preparedDefer=H.defer(),this._readyDefer.promise.then(function(e){e.isReady=!0})}function f(t,n){var i=[],o=document.body;t||(t=o),!t["ne-wguid"]&&D(t.getAttribute("ne-module"))?i.push(t):r(t,function(e){return e!=t&&D(e.getAttribute("ne-module"))?(i.push(e),!1):e});var s=[];return R(i,function(t){var i;if(t["ne-wguid"])i=e.widget(t);else{var r=t.getAttribute("ne-module");D(r)&&(i=h(r,t,n))}s.push(i)}),s}function h(t,n,i,r){n.getAttribute("ne-module")||n.setAttribute("ne-module",""),t=t.replace(/^\s+|\s+$/g,"");var o=!1;/(.*)\*$/.test(t)&&(t=RegExp.$1,o=!0),t&&(t=l(t));var a=d.create(n,o?e.rootWidget:i,t);return a.isolate=o,e.isObject(r)&&a.extend(r),(e.needPolyfill||H.ref.exe).then(function(){s(n).then(function(){t?/^\@|\.js$/.test(t)?pt.get(t).deploy(a,i):(pt.instantiate(null,a),m(t,a)):a.render()})}),a}function p(t,n,i,r,o){var s=function(e){var n;return o.$event=e,o.$target=t,i&&r.update(function(){var t=j(i,o,!0);return t===!1&&e.preventDefault(),t}),n};if("change"==n){var a=e.widget(t);if(a)return a.watch("value",s),function(){a.unwatch("value",s)}}return L.bind(t,n,s),function(){L.unbind(t,n,s)}}function m(e,t){var n=t.wrap,r=t.scope;r.name||(r.name=e);var o=D(n.getAttribute("ne-transclude"));if((o||i(n))&&(t._empty=!0,o&&(n.transclude=n.innerHTML)),t._empty){var s=g(n),a=function(e){n.innerHTML=J.replace(e,{props:s,transclude:n.transclude||""},null,null,/props\.|transclude/),t.render()};if(r.hasOwnProperty("html"))a(r.html);else{var c=s.skin;e=/\//.test(c)?l(c):e.replace(/(\.[^\.]*)?$/,(c?"."+c:"")+".html"),delete s.skin,ht.load(M.buildUrl(e,s),n).then(a)}}else t.render()}function v(e,t){if(q(t)||(t={}),D(e))for(var n;null!==(n=st.exec(e));)t[n[1]]=n[2];return t}function g(e){return v(e.getAttribute("ne-props"))}function y(e,t){return e.hasOwnProperty("state")||(e.state={}),v(t,e.state),e}function b(e,t,n){var i=P(n);R(n,function(t,n){i&&(q(t)?(n=t.value,t=t.label):n=t);var r=new Option(t,n);e.options.add(r)})}function w(e){try{R(e["ne-destroy"],function(e){e()}),R(e["ne-subnode"],function(e){w(e)}),delete e["ne-destroy"]}catch(t){}}function x(e,t,n){if(q(e))for(var i=0;i<t.length;i++)if(t[i].item==e){if(t[i].string==n)return t[i];t.splice(i,1);break}return="" null}function="" _(e,t,n,i,r){q(e)&&!x(e,t)&&t.push({node:n,item:e,string:r,scope:i})}function="" $(e,t,n){if(q(e)&&n)for(var="" i="0;i<t.length;i++)if(t[i][n]==e)return" t[i];return="" t(e){this.widget="e,this.items=[],this.cursor=0}function" k(e){this.widget="e,this.scope=e.scope,this.items=[]}if(!e.expr){var" c="{},E=function(e){return" d(e)?e.tolowercase():e},j="e.expr=function(e,n,i,r){try{r=(C[e]||(C[e]=t(e)))(n||window)}catch(o){if(i)throw" o}return="" r},s="/\s*;\s*/,N=/(\\?)\{\!?\{(.+?)\}\}/,M=e.utils,L=e.dom,I=M.msie,O=e.extend,A=[].slice,R=e.each,q=e.isObject,D=e.isString,P=e.isArray,F=e.isFunction,H=e.$q,z=e.classList,B=e.isDefined,Y=e.ajax,X=e.Promise,U=function(e,t){return" null!="e?e:"!"==t.substr(1,1)?"":t},W={"'":"'","\\":"\\","\r":"r","\n":"n","" ":"t","\u2028":"u2028","\u2029":"u2029"},k="/\\|'|\r|\n|\t|\u2028|\u2029/g,Q=function(e){return"\\"+W[e]},J=e.template={replaceSingle:function(e,t,n,i,r){function" o(t){return="" e.replace(n||="" \{\{([^}]+)\}\}="" g,function(e,n){if(r&&!r.test(e))return="" e;var="" o="j(n,t);return" p(t)||(t="[t]),R(t,function(t){e=o(t)}),e},replace:function(e,t,n,i,r){function" \{\!?\{([^}]+)\}\}="" s="[];return" r(t,function(e){s.push(o(e))}),s.join("")},parse:function(e,t){var="" n="0,i="var" __t,__p="" ,__j="Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\nwith(obj||{}){__p+='";e.replace(/<%=([\s\S]+?)%">|<%([\s\s]+?)%>|$/g,function(t,r,o,s){return i+=e.slice(n,s).replace(K,Q),r?i+="'+\n(typeof ("+r+") =='undefined'||(__t=("+r+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),n=s+t.length,t}),i+="';\n}return __p;";var r=new Function("obj",i);return t?r(t):r}},Z=function(e){return e&&D(e.tagName)?e.tagName.toLowerCase():""},V={"ne-role":function(e,t,n){var i=this,r=i.__roles;R(n.split(/\s+/),function(e){e&&(r[e]||(r[e]=[]),r[e].push(t))})},"ne-model":function(e,t,n,i){var r=this,o=r.models,s=o.add(t,n,e);i["ne-destroy"].push(function(){o.remove(s.id)})},"ne-if":function(e,t,n,i){var r=this,o=r.scope;if(n){var s=document.createTextNode(""),a=!0,c=function(e){a&&!e?(L.replace(s,t),a=!1):!a&&e&&(L.replace(t,s),a=!0)};o.$watch(n,c,e),i["ne-destroy"].push(function(){o.$unwatch(n,c,e)})}},"ne-html":function(e,t,n,i){var r=this,o=r.scope;if(n){var s=function(e){B(e)&&(t.innerHTML=e)};o.$watch(n,s,e),i["ne-destroy"].push(function(){o.$unwatch(n,s,e)})}},"ne-options":function(e,t,n,i){var r=this,o=r.scope;if(t.removeAttribute("ne-options"),t.options){var s=t.options.length,a=function(e){for(;s<t.options.length;)t.remove(s);b(t,r,e)};o.$watch(n,a,e),i["ne-destroy"].push(function(){o.$unwatch(n,a,e)})}},"ne-foreach":function(e,t,n,i){var r="this;return" t.removeattribute("ne-foreach"),v["ne-repeat"].call(r,e,t,n,i,!0)},"ne-recurse":function(e,t,n,i){if(e.hasownproperty("$recurse")){var="" o="this,s={node:[[t]],type:"repeat",wrap:i,key:r.key,attr:r.attr,isTmpl:r.isTmpl,model:n,scope:e};t.removeAttribute("ne-recurse"),i["ne-destroy"].push(o.views.add(s)),i["ne-subnode"]||(i["ne-subnode"]=[])}}},"ne-repeat":function(e,t,n,i,r){var" c,u="t.parentNode,l=(Z(u),[[t]]);if(a)c=J.parse(t.innerHTML.trim());else" if(r)c="J.parse(t.outerHTML.trim().replace(/&lt;/g,"<").replace(/&gt;/g,"">")),r=!1;else{var d=document.createElement("div");d.appendChild(t.cloneNode(!0)),c=d.innerHTML}var f={node:l,attr:c,scope:e,wrap:i,isTmpl:r,type:"repeat"};return/^\s*(\S+)\s+in\s+(.*)/.test(n)?O(f,{key:RegExp.$1,model:RegExp.$2}):f.model=n,i["ne-destroy"].push(o.views.add(f)),i["ne-subnode"]||(i["ne-subnode"]=[]),ut.repeat(f,o,i)}},G={},et={};e.directive=function(e,t){F(t)&&(D(e)?G[e]=t:et[e]=t)},c.prototype={$on:e.on,$off:e.off,$emit:e.emit,$filter:function(e,t){if(P(e)&&t){var n=[];return R(e,function(e){var i;if(F(t)){if(!t(e))return}else if(q(t)){for(i in t)if(!a(e[i],t[i],!0))return}else{var r=!0;if(D(e))r=a(e,t);else{if(!q(e))return;for(i in e)if(!a(e[i],t)){r=!1;break}}if(!r)return}n.push(e)}),n}return e},$watch:function(e,t,n){e=e.replace(/^\s*\{+(.*?)\}+\s*$/,"$1"),n&&n!=this?(this.hasOwnProperty("$$watchS")||(this.$$watchS=[]),this.$$watchS.push({expr:e,fn:t,scope:n})):(this.hasOwnProperty("$$watches")||(this.$$watches={}),this.$$watches[e]||(this.$$watches[e]=[]),this.$$watches[e].push(t))},$unwatch:function(e,t,n){var i;if(e=e.replace(/^\s*\{+(.*?)\}+\s*$/,"$1"),n&&n!=this&&n.$$watchS)for(i=0;i<this.$$watchs.length;i++){var r="this.$$watchS[i];r.expr!=e||t&&r.fn!=t||this.$$watchS.splice(i--,1)}else" if(!n&&this.$$watches&&this.$$watches[e])for(i="0;i<this.$$watches[e].length;i++)t&&this.$$watches[e][i]!=t||this.$$watches[e].splice(i--,1)},$extend:function(){var" e="1<=arguments.length?A.call(arguments,0):[];O.apply(this,[!0,this].concat(e))},$parse:function(e,t){return" t="t||this,e.indexOf("{")">-1?J.replace(e,t,/\{+([^}]+)\}+/g,""):j(e,t)},$cancel:function(){return!1},$refresh:function(e){var t=this,i=t.$widget;return t.hasOwnProperty("$refreshing")&&t.$refreshing?(i.$refresh2=!0,void 0):(t.$refreshing=1,e?(setTimeout(function(){t.$refresh()},e),void 0):(t.hasOwnProperty("$$watches")&&R(t.$$watches,function(e,i){var r=t.$parse(i),o=e.cache,s=n(r);B(o)&&s==o||(e.cache=s,R(e,function(e){e(r,o)}))}),i.models&&i.models.refresh(),i.views&&i.views.refresh(),t.hasOwnProperty("$$watchS")&&R(t.$$watchS,function(e){var i=t.$parse(e.expr,e.scope),r=e.cache,o=n(i);B(r)&&o==r||(e.cache=o,e.fn(i,r))}),R(i.children,function(e){e.refresh()}),t.$refreshing=0,i.$refresh2&&(i.$refresh2=!1,t.$refresh(),i.updateRoles()),void 0))}};var tt=document.createElement("a"),nt=u(window.location.href),it={},rt=/^\.\.\/(.*)/,ot=/[^\/]+?\/?$/,st=/([^;\s]+?)\s*[=:]\s*([^;\s]*)/g,at=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[(['"]?)(.+?)\2\])/g,ct=1;d.create=function(t,n,i){var r;if(t){var o=t.getAttribute("ne-id"),s=t[L._idname];s&&it[s]?r=it[s]:o&&it["#"+o]?r=it["#"+o]:(r=new d,o&&(it["#"+o]=r));var a="$$"+ct++;t["ne-wguid"]=r.guid=a,it[a]=r,r.wrap=t,r.$root=e(t),r.$msg={},n&&(r.parent=n,n.children.push(r)),i?(it[i]||(it[i]=[]),it[i].push(r)):pt.instantiate(null,r)}else r=new d,r.children=[],r.scope=e.rootScope,r.scope.$widget=r,r.views=new k(r),r.models=new T(r),r.update=e.rootScope.$update=r.models.update.bind(r.models);return r.__roles={},r.roles={},r.constructor=d,r
},d.shortName=function(e){return e.replace(/.*\//,"").replace(/\..*/,"")},d.compile=function(t,n){t?n||(n=e.rootWidget):(e.rootWidget=n=e.rootWidget||d.create(),n._readyDefer.resolve(n)),e.ready(function(){f(t,n)})},d.prototype={_assure:function(e){if(!this.isReady)throw"widget is not ready";return e.call(this)},load:function(e,t,n){return h(e,t||this.wrap,this,n)},val:function(e){return B(e)?(this.set("value",e),void 0):this.isReady?this.get("value"):""},get:function(e){return this._assure(function(){return this.scope[e]})},set:function(e,t){this.ready(function(){this.scope[e]=t,this.scope.$refresh()})},updateRoles:function(){var t=this,n=t.__roles={},i=t.$root[0];r(i,function(t){if(t!=i&&D(t.getAttribute("ne-module")))return!1;var r=t.getAttribute("ne-role");return r&&e.each(r.split(/\s+/),function(e){e&&(n[e]||(n[e]=[]),n[e].push(t))}),t});for(var o in t.roles)delete t.roles[o];for(var s in t.__roles)t.roles[s]=e(t.__roles[s]);return t},compile:function(e){return f(e||this.wrap,this)},prepared:function(e){var t=this._preparedDefer.promise;return F(e)?(t.then(e.bind(this)),this):t},replaceWith:function(e,t,n){if(D(e)){var i=this,r=i.parent,o=i.$root;i.destroy(n),r.load(e,o[0],t)}},destroy:function(e){var t,n=this,i=n.$root[0];(!B(e)||e)&&(i.innerHTML=""),i["ne-wguid"]=null,w(i);var r=n.scope.$moduleid,o=it[r];if(P(o))for(t=0;t<o.length;t++)if(o[t]==n){o.splice(t,1);break}var s="n.parent.children;if(P(s))for(t=0;t<s.length;t++)if(s[t]==n){s.splice(t,1);break}n.scope=n.views=n.models=null,n._readyDefer=H.defer()},ready:function(e){var" t="this._readyDefer.promise;return" f(e)?(t.then(e.bind(this)),this):t},extend:function(){var="" e="this,t=!0,n=1<=arguments.length?A.call(arguments,0):[];return"boolean"==typeof" n[0]&&(t="n.shift()),e.prepared(function(){O.apply(e,[t,e.scope].concat(n)),e.isReady&&e.refresh()}),e},render:function(){var" c="e.scope.$moduleid;e.neExtend.unshift(c.replace(/js$/,s.device+".js"))}e.find=e.$root.find.bind(e.$root),R(e.neExtend,function(e){e&&(e=l(e),o.push(e),r.push((i[e]||pt.makeDefer(e)).promise))}),H.all(r).then(function(){if(r.length){var" i="pt._exports,s=pt._fns;R(o,function(e){if(!i[e]&&s[e]){var" this.scope&&this.scope.$refresh(),this},wander:function(t,n,i){var="" a="this;t=t||a.$root[0],n=n||a.scope;var" f="{};t["ne-destroy"]=[],r(t,function(i){for(var" r,h="o(i),m=function(e,r){var" if(s){if(i="s,1!=i.nodeType)return" i;i.removeattribute(y),h="o(i)}},v=0,g=u.length;g">v;v++){var y=u[v],b=h[y];if(D(b)&&F(V[y])&&(r=m(V[y],b),B(r)))return r}for(var w in h)if(!V[w]){var x=h[w],_=w.substr(3);if(d[w])D(x)&&t["ne-destroy"].push(p(i,_,x,a,n));else if(e.event(_))x&&t["ne-destroy"].push(p(i,_,x,a,n));else if(l.test(_))f[_]=1;else if(/ne-(href|src|value|title)/.test(w))w=RegExp.$1,x&&(/\{.+?\}/.test(x)?t["ne-destroy"].push(c.add({node:i,model:x,attr:w,scope:n})):null==x?i.removeAttribute(w):i.setAttribute(w,x));else if("ne-"==w.substr(0,3)&&F(c[w]))r=c[w](i,x,n),F(r)&&t["ne-destroy"].push(r);else if(F(G[w]))m(G[w],x);else{var $=!1;for(var T in et)if(T.test(w)){if($=!0,r=m(et[T],x),B(r))return r;break}"ne-cloak"==w?i.removeAttribute(w):$||V[w]||"ne-module"==w||!/^\{\{.+?\}\}$/.test(x)||t["ne-destroy"].push(c.add({node:i,model:x,attr:w,scope:n}))}}if(D(h["ne-module"])){if(i!=t)return!1}else h["ne-plugin"]&&s(i,h["ne-plugin"]);return i},function(e){var i=e.nodeValue;N.test(i)&&("\\"==RegExp.$1?e.nodeValue=i.replace(/\\(\{\!?\{.*?\}\})/g,"$1"):t["ne-destroy"].push(c.add({node:e,model:i,scope:n},!0)))},i),R(a.__roles,function(t,n){a.roles[n]=e(t)}),R(f,function(e,i){var r=function(e){for(var r=e.target,o=r;o&&o!=t;)o["ne-destroy"]&&(r=o.parentNode),o=o.parentNode;if(o){for(var s=[];r&&r.getAttribute;){var c=r.getAttribute("ne-"+i);if(c&&s.push({target:r,evt:c}),r==t)break;r=r.parentNode}s.length&&a.update(function(){n.$event=e;for(var t,i=0;i<s.length;i++)if(n.$target=s[i].target,t=j(s[i].evt,n,!0),t===!1){e.preventdefault();break}return t}),s="null}};L.bind(t,i,r),t["ne-destroy"].push(function(){L.unbind(t,i,r)})})}},R(["on","off","emit","watch","unwatch"],function(e){d.prototype[e]=function(){var" t="A.call(arguments);this.ready(function(){var" n="this.scope;n["$"+e].apply(n,t)})}});var" ut="{_replace:function(e,t){for(var" t[n]&&t[n].nodetype)l.appendchild(t[n]),r(t[n]),d.push(t[n]);else{var="" f="L.create(t[n],!0);R(f.childNodes,r),l.appendChild(f)}if(n--,R(e,function(e){R(e,function(e){for(var" h="document.createTextNode("");r(h),l.appendChild(h)}return" c&&c.parentnode="=a?a.insertBefore(l,c):a.appendChild(l),u=l=e=null,i},repeat:function(e,t,n){var" i,r,o="e.attr,s=e.key,a=F(o),c=e.isTmpl,u=e.scope||t.scope,l=e.model,d=[];if(n=n||e.wrap,l){var" m="0;i">m;m++){var v=e.repeatScopes[m];if(v[s]!==f[m]){h=!0;break}}if(!a&&!h)return!1}var g=e.repeatScopes||[];if(e.repeatScopes=[],R(f,function(t,n){var r=Object.create(u);s?r[s]=t:O(!0,r,q(t)?t:{__val:t}),O(r,{__len:i,__i:n});var c=a?o(r):s?o:J.replace(o,r);g[n]&&g[n].hasOwnProperty("b$html")&&c==g[n].b$html||(h=!0),e.repeatScopes[n]=r,d.push(c)}),!h)return e.repeatScopes=g,s||R(f,function(t,n){O(e.repeatScopes[n],t)}),!1;R(f,function(t,n){var r=d[n],a=s?null:x(t,p,r),u=s?$(t,g,s):a?a.scope:null,l=s?u&&u.hasOwnProperty("b$node")?u.b$node:null:a?a.node:null;l&&l["ne-destroy"]&&(d[n]=l),u&&(e.repeatScopes[n]=u,s||O(e.repeatScopes[n],t)),O(e.repeatScopes[n],{__len:i,__i:n,b$html:r}),s&&(e.repeatScopes[n].$recurse={key:s,attr:o,isTmpl:c})}),g=null}else{if(r=o(u),B(e._value)&&r==e._value)return!1;e._value=r,d.push(r)}return c&&(d=[d.join("")]),e.node=this._replace(e.node,d),(i||!l)&&R(e.node,function(i,r){var o;t.$refresh2=!0,l&&!c&&(o=e.repeatScopes[r]),R(i,function(e){if(!e[L._idname]&&o&&(s?o.b$node=e:D(d[r])&&_(f[r],p,e,o,d[r])),!e["ne-destroy"]){if(3==e.nodeType){var i=e.nodeValue;N.test(i)&&(e["ne-destroy"]=[t.views.add({node:e,model:i,scope:o})])}else{if(1!=e.nodeType)return;t.wander(e,o,!0)}n&&-1==n["ne-subnode"].indexOf(e)&&n["ne-subnode"].push(e)}})}),!1}};T.prototype={add:function(t,n,i){var r=this.widget;i=i||r.scope;var o={id:this.cursor++,scope:i,node:t,model:n,_value:n},s=j(o.model,i);B(s)?this._refresh(o):this._update(o),this.items.push(o);var a=e.widget(t),c=r.wrap;if(a)a.watch("value",r.update),c["ne-destroy"].push(function(){a.unwatch("value",r.update)});else{var u="change";"input"==E(t.tagName)&&(u+=" input"),L.bind(t,u,r.update),c["ne-destroy"].push(function(){L.unbind(t,u,r.update)})}return o},remove:function(e){for(var t=0,n=this.items.length;n>t;t++)if(this.items[t].id==e){this.items.splice(t,1);break}},update:function(e,t){var n=this,i=n.widget,r=i.scope;return r&&r.$refreshing?(setTimeout(function(){n.update(e,t)},50),void 0):(R(n.items,n._update),R(i.children,function(e){e.update&&e.update(null,!1)}),F(e)&&(t=e.apply(i.scope)),t&&F(t.then)?t.then(function(){i.refresh()}):t!==!1&&i.refresh(),void 0)},_update:function(e){var t=e.node,n=L.val(t);if(("input"!=E(t.tagName)||"radio"!=E(t.getAttribute("type"))||t.checked!==!1)&&n!=e._value){var i,r=e.scope;e.model.replace(at,function(e,t,n,o){B(i)&&(r[i]||(r[i]={}),r=r[i]),i=t||o}),r[i]=n}},_refresh:function(e){var t=e.node,n=j(e.model,e.scope);e._value=n,"input"==E(t.tagName)&&"radio"==E(t.getAttribute("type"))?L.attr(t,"checked",n==L.val(t)):n!==L.val(t)&&L.val(t,null!=n?n:"")},refresh:function(){R(this.items,this._refresh)}},k.prototype={add:function(e,t){var n=this.items;return n.push(e),t&&this.refresh(e),function(){var t=n.indexOf(e);t>-1&&n.splice(t,1)}},"ne-show":function(e,t,n){var i=this.scope,r=function(t){L[t?"show":"hide"](e)};return i.$watch(t,r,n),function(){i.$unwatch(t,r,n)}},"ne-hide":function(e,t,n){var i=this.scope,r=function(t){L[t?"hide":"show"](e)};return i.$watch(t,r,n),function(){i.$unwatch(t,r,n)}},"ne-visible":function(e,t,n){var i=this.scope,r=function(t){e.style.visibility=t?"visible":"hidden"};return i.$watch(t,r,n),function(){i.$unwatch(t,r,n)}},"ne-hidden":function(e,t,n){var i=this.scope,r=function(t){e.style.visibility=t?"hidden":"visible"};return i.$watch(t,r,n),function(){i.$unwatch(t,r,n)}},"ne-class":function(e,t,n){var i=[],r=function(t,n){n&&z.remove(e,n),t&&z.add(e,t)};if(D(t)&&t.trim()){var o=this.scope;t=t.replace(/[\w\-]*\{+.+?\}+[\w\-]*/g,function(e){return o.$watch(e,r,n),i.push(function(){o.$unwatch(e,r,n)}),""}),R(t.split(/\s+/),function(t){t&&z.add(e,t)})}return function(){R(i,function(e){e()})}},"ne-style":function(e,t,n){if(D(t)){if(t=t.trim(),!t)return null;var i=this.scope,r=function(t,n){e.style.cssText=e.style.cssText.replace(";"+n,"")+";"+t};/\{+(.+?)\}+/.test(t)?i.$watch(t,r,n):L.css(e,t)}return function(){i.$unwatch(t,r,n)}},refresh:function(e){var t=this,n=t.scope;if(!e)return R(t.items,function(e){t.refresh(e)}),void 0;var i=e.type,r=t.widget;if(ut[i])ut[i](e,r);else{var o=e.node,s=e.scope||n,a=J.replace(e.model,s,/\{\!?\{?([^}]+)\}{1,2}/g);if(a!==e._value){var c=o.nodeType;3==c?e.node.nodeValue=a:1==c&&e.attr&&(a===e.model?o.removeAttribute(e.attr):"value"==e.attr?o.value=a:o.setAttribute(e.attr,a)),e._value=a}}}};var lt=[];e.define=function(e,t,n){D(e)?e=l(e):(n=t,t=e,e=null),P(t)||(n=t,t=[]);var i={fn:n,deps:t};return e?pt.postDefine(e,i):lt.push(i),i},this.define||(this.define=e.define);var dt=this.define.skin=function(e,t){return q(e)?(R(e,function(e,t){dt(t,e)}),void 0):(ht.promises[l(e)]=new X(function(e){e(t)}),void 0)},ft={},ht={promises:{},load:function(t){var n=document.head||document.getElementsByTagName("head")[0]||document.documentElement,i=t.replace(/\?.*/,""),r=i.replace(/^https?:\/\/.*?\//,"/"),o=this.promises[i]||this.promises[r];return o?R(ft[i],function(e,t){ft[i][t]=n.appendChild(e.cloneNode()),setTimeout(function(){try{n.removeChild(e)}catch(t){}e=null},1e3)}):o=this.promises[i]=Y.get(t).then(function(t){var r=document.createElement("div"),o=t.data;return e.debug&&(o=o.replace(/(<link [^="">]*?href=")\//,"$1"+e.debug+"/")),r.innerHTML=(9>I?"<input>":"")+o,9>I&&r.removeChild(r.firstChild),new X(function(e){var t=0,s=pt._loadedlink;R(ft[i]=M.cssQuery("link, style",r),function(i){if("link"==Z(i)){t++;var r=l(i.getAttribute("href")),a=function(){0===--t&&e(o)};s[r]?(L.remove(i),i=s[r],setTimeout(a,100)):(s[r]=i,i.onload=i.onreadystatechange=function(){i.readyState&&"complete"!=i.readyState||(i.onload=i.onreadystatechange=null,setTimeout(a,50))},setTimeout(function(){i.onload&&i.onload()},2e3))}n.appendChild(i)}),o=r.innerHTML,r=null,0===t&&e(o)})}),o}},pt={_fns:{},_exports:{},_loadedjs:{},_loadedlink:{},_defers:{},_promises:{},makeDefer:function(e,t){var n=this._defers,i=n[e]=H.defer(),r=i.promise;if(r.deploy=function(e,t){var n=3<=arguments.length?a.call(arguments,2):[];return r.then(function(i){f(i.deploy)&&(e="i.deploy(e,t,n))}),e},!t){var" o="this._promises,s=this._exports;s[e]?i.resolve(s[e]):o[e]||(o[e]=Y.require(e).success(function(){pt.postDefine(e)}))}return" i},get:function(e){e="l(e);var" t="pt._defers,n=t[e]||pt.makeDefer(e);return" n.promise},createlink:function(e){var="" n="this,i=n._loadedjs,r=n._promises,o=H.ref.exe;if(/^text\!/.test(e)){e=l(e,t);var" s="e.replace(/.*\!/,""),a=n._exports;return" a[e]?null:(o="r[e],o||(o=r[e]=new" x(function(t){y.get(s).success(function(n){a[e]="n,t(n)})})),o)}var" c="!0,u="!"==e.substr(0,1);return" r(e.split(s),function(e){e="l(e.replace(/^!/,""),t);var" a="s[1]||"utf-8";s=null,i[e]||(c=!1,o=r[e]?o.then(function(){return" r[e]}):r[e]="o.then(function(){return" y.require(e,{charset:a}).then(function(){i[e]="!0,u?n.digest():n.postDefine(e)})}))}),c?null:o.then(function(){i[e]=!0})},postDefine:function(t,n){var" i="!0,r=this,o=r._loadedjs,s=r._fns,a=r._exports;if(n||(n=lt.shift()),!n)throw"define" not="" found="" for="" "+t;if(!f(n.fn))return="" a[t]="n.fn||{},r._defers[t]&&r._defers[t].resolve(n),void" 0;n.name="t;for(var" c,u="n.deps||[],f=n.depInject=[],h=0;h<u.length;h++)/\.css$/i.test(u[h])?(r.createLink(l(u[h],t)),u.splice(h--,1)):u[h]||u.splice(h--,1);n.deploy=function(n,i,r){return" n.constructor!="d&&(n=d.create(n,i||e.rootWidget,t)),pt.instantiate(this,n,r),n},R(u,function(e){if(e=l(e,t),a[e])f.push(a[e]);else" if(s[e])c="!0,i=!1;else" if(o[e])"!"!="e.substr(0,1)&&(i=!1);else{var" p="r._defers[t]||r.makeDefer(t,!0);i?r.saveDefine(n):(p.def=n,c&&r.digest())},digest:function(){var" t.delay||(t.delay="e.needPolyfill.then(function(){t.digest()})),void" 0;var="" e.deps;var="" r="n.scope=n.isolate?new" c:object.create(n.parent?n.parent.scope:e.rootscope),o="n.models=new" t(n);n.update="r.$update=o.update.bind(o),n.views=new" k(n),r.$widget="n,r.$root=n.$root,t?(r.$moduleid=t.name,t.fn.apply(r,t.depInject),n._preparedDefer.resolve(n),i&&(P(i)||(i=[i]),R(i,function(e){O(!0,r,e)})),m(t.name,n)):n._preparedDefer.resolve(n)}};e.module=pt.get,e.run=function(e){return" pt.get(e).then(function(e){var="" e.fn.apply(t,e.depinject),t})},e.defined="function(e){return" d(e)?(e="l(e),pt._fns[e]||pt._exports[e]):null},e.widget=function(e){if(e&&e.getAttribute){var" d)}else{var="" d):"$"!="n&&(e=l(e))}return" it[e]},e.rootscope="new" c,d.compile()}}.call(this,this.bowlder,function(e){return="" new="" function("obj","with(obj)return="" "+e)}),bowlder.define("="" products="" photoset="" mobile="" endpage.js",function(){function="" e(e){var="" i}var="" "+o);var="">1?"javascript:history.back(-1)":"http://"+location.host;try{document.domain="163.com"}catch(c){}var u={};t.showTie=function(){n.emit("tie.open")},t.showShare=function(){n.emit("sidebar.share.show")},t.toggleAside=function(){i.toggleClass("aside-active"),n(this.$target).toggleClass("in")},t.init=function(){function t(){window.adcallback=function(e){delete window.adcallback,e.src&&e.url&&(document.querySelector(".js-ad img").src=e.src,document.querySelector(".js-ad .link").href=e.url)},n.ajax.require("http://temp.163.com/special/00804KG1/epsp14_for_ad.js")}n(".photoset-location").each(function(t,n){var i=t.querySelector(".channelid");if(i){var r=i.value,o=t.dataset.id="photosetinfo"+n,s=t.querySelector(".setid").value,a={id:o,channelId:r,setId:s};e(a).then(function(e){var n=new Image,i=document.createElement("div");e.channelId=r,e.setId=s,n.src=e.cover,i.classList.add("photoset-footer-wrap"),i.innerHTML='<div class="photoset-footer">\n  <span style="color: #D64949"> 1 </span><span>/ '+e.imgsum+'</span>\n  <i class="icon-plus"></i>\n</div>',i.appendChild(n),t.appendChild(i)})}}).bind("tap",function(){var t=this.dataset.id;e({id:t}).then(function(e){n.emit("endpage.photoset.show",e)})});var o=!1,s=function(){if("fixed"!=i.css("position")){var e=document.body.scrollTop||document.documentElement.scrollTop;!o&&e>=48?(o=!0,i.addClass(r.fixed)):o&&48>e&&(o=!1,i.removeClass(r.fixed))}};n(window).bind("scroll",s),s(),t()}}),bowlder.define("/products/photoset/mobile/modules/photoset/photoset.js",[],function(){function e(e,t,n){if(t=t||1e4,n=n||1e4,0==e.indexOf("http://")&&/\.(jpg|png)/i.test(e)){var i=/^(http:\/\/s\.cimg\.163\.com.*?)\d+x\d+\.auto\.jpg/;e=i.test(e)?e.replace(i,"$1"):"http://s.cimg.163.com/i/"+encodeURIComponent(e.replace(/http:\/\//,""))+".",e+=t+"x"+n+".auto.jpg"}return e}var t,n,i=this,r=bowlder,o=r("body"),s=i.state={hideCls:"net-hide"};i.init=function(i){var a=r.widget("#photoset"),c=i.$root;s.channelId&&a.extend({state:{channelId:s.channelId,setId:s.setId}}),a.ready(function(){this.$root.addClass("photoset-full");var i=this.roles,u=this.scope,l=i.photoarea;s.nohash&&(u.state.nohash=1),r.on("endpage.photoset.show",function(e){window.scrollTo(0,(document.body.scrollTop||document.documentElement.scrollTop)+1),r.fullscreen=!0,c.removeClass(s.hideCls),a.extend({title:e.setname,list:e.photos,state:{initLastpage:!1,showBackcover:!1,channelId:e.channelId,setId:e.setId}}),u.reInit(!0),o.addClass("noscroll"),u.stat()}),l&&l.bind("touchstart",function(){u.state.showBackcover||(r.freezeScroll=!0)}).bind("tap",function(){u.state.showBackcover||(c.toggleClass("active"),!c.hasClass("active")&&screen.height-document.documentElement.clientHeight>40&&(document.body.style.paddingBottom="60px",window.scrollTo(0,1),setTimeout(function(){document.body.style.cssText=""},150)))}),u.stat=function(){try{neteaseTracker(!0,"http://mobiapt."+location.hostname+location.pathname+"#photoset","","mobiapt"),vjEventTrack()}catch(e){console.warn("\u56fe\u96c6\u7edf\u8ba1\u51fa\u9519\uff01")}},u.hidePhotoset=function(){r.fullscreen=!1,setTimeout(function(){o.removeClass("noscroll"),c.addClass(s.hideCls)},150)},window.addEventListener("orientationchange",function(){setTimeout(function(){u.reInit()},300)});var d;r.on("photoset.lastpage",function(i,o){var s="http://c.3g.163.com/photo/api/related/"+o.channelId+"/"+o.setId+"/albumRecommend.json";window.albumRecommend=function(o){if(window.albumRecommend=null,r.isArray(o)&&o.length){var s="",a='<div class="item"><a class="img-wrapper" href=""><img class="last-page" src=""></a><h3><a href=""></a></h3></div>';t=document.getElementById("tbAd");for(var c=0;c<math.min(5,o.length);c++){if(t&&4==c){n||(s+='<div class="item itembn"><a style="display:none!important" id="tanx-a-mm_16143929_2253494_31570613"></a>');break}o[c].imgW=4==c?320:159,o[c].itemcls=4==c?" itembn":"",o[c].seturl&&(o[c].seturl=o[c].seturl.replace("house.163.com/photoview/","house.163.com/photonew/")),(4==c||window.innerWidth>=640&&window.innerHeight>=640)&&(o[c].tcover=e(o[c].cover,Math.round(1.6*o[c].imgW))),s+=r.template.replace(a,o[c])}d||(d=document.createElement("div"),d.className="photo-backcover",i.append(d),r.emit("photoset.backcover.loaded",i,d)),r.on("photoset.backcover.show",function(e){if(e==d&&s&&(d.innerHTML='<div class="photo-backcover-inner"><div class="recommedAlbum">'+s+"</div></div>",s=null,t))if(n)r(".recommedAlbum",d.app).append(n);else{var i=document.createElement("script");i.innerHTML=t.innerHTML,n=r(".itembn",d)[0],n.appendChild(i)}})}},r.ajax.require(s)})})}}),bowlder.define("/modules/photoset/photoset2.js",function(){function e(){return k.cursor>=_.list.length-(g?0:1)?0:k.cursor+1}function t(){return 0===k.cursor?_.list.length-1:k.cursor-1}function n(e){if(_.list.length){var t=l[0].offsetWidth,n=document.documentElement.clientHeight||window.innerHeight,i=Math.min(k.maxHeight||1e4,n),r=Math.min(k.maxWidth||1e4,t),o=m&&r>k.compactWidth;f.css({width:r-(o?330:0)});var s=Math.max(i-(m?40:120),300);if(k.fullscreen)s=n;else if(k.fixedH){var a=0;$.each(_.list,function(e){var t=e.width,n=e.height||e.length;t&&n&&((k.allowZoomIn||r<e.width)&&(n=r*n t),a="Math.max(a,n))}),k.setHeight&&(s=parseInt(k.setHeight)),f.css({height:Math.min(a||1e4,s)}),o&&w&&w.onshow&&w.onshow()}m&&m.css({height:s})[o?"show":"hide"](),setTimeout(function(){c=Math.min(r,h[0].offsetWidth-(m?10:0)),u=m?h[0].offsetHeight-10:s,x=$.dom.pos(h[0]).left+h[0].offsetWidth/2,"function"==typeof" e&&e()},50)}}function="" i(e){i="e,0===e?h.animate({translate3d:(k.showBackcover?-h[0].offsetWidth:0)+"px,0,0"},150,k.ease):h.css({translate3d:(k.showBackcover?-h[0].offsetWidth:0)+e+"px,0,0"})}function" r(){var="" e;if(="" (^|&|\?)p="(\S+?)(&|$|#|\?)/.test(location.href.replace(/.*?(#|$)/,"")))for(var" t="RegExp.$2,n=0,i=_.list.length;i">n;n++)if(_.list[n][k.idKey]==t){e=n;break}return k.showBackcover&&e++,e}function o(){var e=r();"undefined"!=typeof e&&e!=k.cursor&&_.showphoto(e)}function s(e){var t=Math.floor(e/k.pageSize);t!=w.state.cursor&&w.showSlide(t),setTimeout(function(){var t=b?b.roles.thumb:null;t&&(y&&y.removeClass(T.current),y=t.eq(e),y&&y.addClass(T.current))},50)}var a,c,u,l,d,f,h,p,m,v,g,y,b,w,x,_=this,$=bowlder,T=_.cls={wrap:"photo-wrap",current:"current",fold:"picinfo-fold",left:"cursor-left",right:"cursor-right",full:"photoset-full",loading:"photo-loading",backcoverOn:"photo-backcover-on"},k=_.state={slide:"shift",idKey:"id",imgKey:"img",ease:"easeOut",pageSize:12,allowZoomIn:!1,compactWidth:900},C={},E=!1,j={fade:function(e,t,n){t.css({zIndex:6}).animate({opacity:0}),e.css({zIndex:7}).animate({opacity:1},n)},shift:function(e,t,n,i){h.animate({translate3d:-i+"px,0,0"},250,k.ease,n)}};_.curList=[],_.list=[];var S,N=1;_.photoPinch=function(e){var t=this.$event;return $.isNumber(t.zoom)&&t.zoom&&N?(t.ending?(N*=t.zoom,1>N&&(N=1,S=setTimeout(function(){e.animate({scale:N},400,k.ease)},200))):(S&&(clearTimeout(S),S=null),N*t.zoom>5&&(N=5/t.zoom),e.css({scale:N*t.zoom})),!1):!1},_.toggleInfo=function(){p.toggleClass(T.fold)};var M,L,I,O,A=function(e){return _.list[e]||{}},R=function(){a.picinfo&&!O&&(O=!0,setTimeout(function(){a.picinfo.css({visibility:"visible"})},50))},q=function(e,t){if(e<_.list.length){t&&_.curlist.length?_.curlist[1==t?2:0]=_.list[e]:(_.curlist[0]=a(e-1),_.curlist[1]=a(e),e>=_.list.length-1?_.curList.splice(2,1):_.curList[2]=A(e+1),k.cursor=e,"shift"==k.slide&&h.css({translate3d:"0,0,0"})),_.$refresh();var n=h[0].children;h.find("img").each(function(e,t){e.onload||(e.onload=D),2>t&&R()}),D()}if(p&&!t){var i=n[1];p.css({visibility:"visible"}),i.offsetWidth<400?h[0].appendchild(p[0]):i.appendchild(p[0])}},d=function(){if(!k.fixedh){var e="h[0].querySelectorAll(".photo-wrap-inner");h.css({height:Math.max(e[0].offsetHeight,e[1]?e[1].offsetHeight:0,e[2]?e[2].offsetHeight:0)})}};_.showphoto=function(e){if(!M&&$.isDefined(e)&&k.cursor!==e){M=!0;var" t;if($.isdefined(k.cursor)?t="e">k.cursor?1:-1:k.cursor=e,I||"shift"!=k.slide||i(0),w?s(e):b&&b.ready(function(){s(e)}),q(e,t),j[k.slide](null,null,function(){return N=1,g&&(l[k.showBackcover?"addClass":"removeClass"](T.backcoverOn),k.showBackcover)?($.emit("photoset.backcover.show",g[0]),M=!1,void 0):(!k.initLastpage&&e>=_.list.length-2&&(k.initLastpage=!0,$.emit("photoset.lastpage",f,k)),setTimeout(function(){q(e),v&&v.css({marginLeft:Math.max(12,v[0].children[0].offsetWidth-12)});var t=h.find("."+T.wrap);t[0]&&(t[0].className=T.wrap+" "+T.wrap+"-1"),t[1]&&(t[1].className=T.wrap+" "+T.wrap+"-2"),t[2]&&(t[2].className=T.wrap+" "+T.wrap+"-3"),M=!1},50),void 0)},t*h[0].offsetWidth),!k.showBackcover){var n=location.hash.replace(/^#/,""),r="p="+_.list[e][k.idKey];!k.nohash&&E&&(location.hash=n?/(^|\?)p=/.test(n)?n.replace(/(^|\?)p=.*|$/,"$1"+r):n+"?"+r:r),E&&_.hasOwnProperty("stat")&&setTimeout(_.stat,50),E=!0}}},_.changephoto=function(){if(!M){var e=this.$event;"shift"==k.slide||e.clientX>=x?_.nextphoto():_.prevphoto()}},_.nextphoto=function(){if(k.cursor==_.list.length-1)if(g){if(k.showBackcover)return;k.showBackcover=!0}else if(k.noLoop)return i(0),void 0;_.showphoto(e())},_.prevphoto=function(){return g&&k.showBackcover?(k.showBackcover=!1,j[k.slide](null,null,function(){l.removeClass(T.backcoverOn)},0),void 0):0===k.cursor&&k.noLoop?(i(0),void 0):(_.showphoto(t()),void 0)};var P;_.changeCursor=function(){var e=this.$event,t=e.clientX;t>=x&&"next"!=P?(P="next",h.addClass(T.right).removeClass(T.left)):x>t&&"prev"!=P&&(P="prev",h.addClass(T.left).removeClass(T.right))},_.photoSwipe=function(){if(M)return!1;var e=this.$event,t=e.dx,n=e.dy;setTimeout(function(){Math.abs(t)>Math.abs(n)&&(Math.abs(t)>220||Math.abs(e.speedX)>60&&Math.abs(t)>60)?t>0?_.prevphoto():_.nextphoto():i(0)})},_.photoSwiping=function(){if(M)return!1;var e=this.$event,t=e.dx,n=e.dy,r=e.speedX||e.speedY?Math.abs(e.speedY)>Math.abs(e.speedX):Math.abs(n)>Math.abs(t);return Math.abs(n)>6&&r?i(0):Math.abs(t)>6&&!r&&($.freezeScroll=!0,(!k.showBackcover||t>0)&&i(t)),!1},_.stat=function(){"function"==typeof vjEventTrack&&vjEventTrack(),"function"==typeof neteaseTracker&&neteaseTracker()},_.fullscreen=function(e){return k.fullscreen?(!e&&_.hasOwnProperty("fullscreenTap")&&_.fullscreenTap(),void 0):(k.fullscreen=!0,document.body.appendChild(l[0]),l.addClass(T.full),_.reInit(!0),void 0)},_.exitFullscreen=function(){k.fullscreen&&(k.fullscreen=!1,d.appendChild(l[0]),l.removeClass(T.full),_.reInit(!0),$.emit("photoset.fullscreen.exited"))},_.reInit=function(e){e&&(C=[],_.curList=[],delete k.cursor,g&&l.removeClass(T.backcoverOn)),0!==_.list.length&&n(function(){b&&b.ready(function(){w.reInit(),_.hasOwnProperty("reInitThumbs")&&_.reInitThumbs.call(b)}),L=null,_.showphoto(r()||0)})},_.init=function(e){a=e.roles,l=e.$root,d=l[0].parentNode,b=e.children[0],f=a.wrap,h=a.photoarea,m=a.sidebar,v=a.progress,p=a["photo-info"],g=a.backcover,g||$.on("photoset.backcover.loaded",function(e,t){f==e&&(g=$(t))});var t=a.infotext;if(m&&(k.fixedH=1),t){var i=t[0].children[0];t.bind("mouseover",function(){t.animate({height:Math.max(i.offsetHeight,40)})}).bind("mouseout",function(){t.animate({height:40})})}b&&b.ready(function(){w=b.scope,m?m.css({visibility:"visible"}):k.pageSize=1}),_.reInit(),$(window).bind("resize",n).bind("hashchange",o),$.on("photoset.fullscreen",function(){_.fullscreen(!0)}),$.on("photoset.fullscreen.exit",function(){_.exitFullscreen(!0)}),$(".total").bind("click",function(){alert($(".photoarea>div:nth-child(2)")[0])})}}),bowlder.define("/products/photoset/mobile/modules/share/share.js",function(){var e,t=this,n=bowlder;t.closeShare=function(){n.emit("sidebar.share.hide")},t.init=function(i){e=i.$root,n.widget("#share").ready(function(){var n=(this.$root,this.scope);e.bind("tap",function(e){var i=e.fireTarget,r=i.getAttribute("data-share");r?n.share(r):i==this&&t.closeShare()})})}}),function(e,t,n){var i="yxb5a65281d3114313b34e400bdba41dd3",r={},o=(new Date).valueOf(),s={format:function(e){for(var t=e,n=1;n<arguments.length;n+=1){var i="new" regexp("\\{"+(n-1)+"\\}","gi");t="t.replace(i,arguments[n])}return" t},loadjs:function(e,n,i){var="" r="t.createElement("script");r.type="text/javascript",r.charset=i||"utf-8",r.onload=function(){n&&n();try{t.body.removeChild(r)}catch(e){}},r.src=e,t.body.appendChild(r)},addEvent:function(e,i,r){var" o="function(e,t){try{var" n="e.contains?e!=t&&e.contains(t):!!(16&e.compareDocumentPosition(t))}catch(i){}return" n?n:!1},s="function(e){if(e.preventDefault||(e.preventDefault=function(){e.returnValue=!1}),e.stopPropagation||(e.stopPropagation=function(){e.cancelBubble=!0}),e.target||(e.target=e.srcElement||t),3===e.target.nodeType&&(e.target=e.target.parentNode),!e.relatedTarget&&e.fromElement&&(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),null==e.pageX&&null!=e.clientX){var" t="e.currentTarget,n=e.relatedTarget;o(t,n)||t==n||r.call(t,s(e))};e.addEventListener?"mouseenter"==i?e.addEventListener("mouseover",a,!1):"mouseleave"==i?e.addEventListener("mouseout",a,!1):"mousewheel"===i&&t.mozHidden!==n?e.addEventListener("DOMMouseScroll",a,!1):e.addEventListener(i,r,!1):e.attachEvent("on"+i,function(t){r.call(e,s(t))})},isArray:function(e){return"[object" array]"="=Object.prototype.toString.call(e)},isNodeList:function(e){return"[object" nodelist]"="=Object.prototype.toString.call(e)},toArray:function(e){return" array.prototype.slice.call(e)},each:function(e,t,n){if(null!="e)if(Array.prototype.forEach&&e.forEach===Array.prototype.forEach)e.forEach(t,n);else" if(e.length="==+e.length){for(var">i;i++)if(t.call(n,e[i],i,e)==={})return}else for(var o in e)if(e.hasOwnProperty(o)&&t.call(n,e[o],o,e)==={})return},getElementsByClassName:function(e,n,i){var r,o=[];if(t.getElementsByClassName){var s=(n||t).getElementsByClassName(e);for(r=0;n=s[r++];)"*"!==i&&n.tagName===i.toUpperCase()&&o.push(n);return o}n=n||t,i=i||"*";var a,c,u=e.split(" "),l="*"===i&&n.all?n.all:n.getElementsByTagName(i),d=[];for(r=u.length;--r>=0;)d.push(new RegExp("(^|\\s)"+u[r]+"(\\s|$)"));for(var f=l.length;--f>=0;){a=l[f],c=!1;for(var h=0,p=d.length;p>h&&(c=d[h].test(a.className),c);h++);c&&o.push(a)}return o},getScrollOffset:function(){var n=t.documentElement,i=t.body;return e.pageYOffset?[e.pageXOffset,e.pageYOffset]:n&&n.scrollTop?[n.scrollLeft,n.scrollTop]:[i.scrollLeft,i.scrollTop]},getUUID:function(){return++o}},a={};a.intro='<div class="yx-intro">    <div class="yx-intro-inner">        <div class="yx-intro-text">            <h3>\u5b8c\u6210\u4ee5\u4e0b\u4efb\u52a1\uff0c\u5c31\u53ef\u4ee5\u8f6c\u53d1\u6613\u4fe1\u5566\uff01</h3>            <ol>                <li class="{0}"><a href="http://e.mail.163.com/mobilemail/home.do?from=yixinshare" target="_blank">\u5f00\u901a\u7f51\u6613\u624b\u673a\u53f7\u7801\u90ae\u7bb1</a></li>                <li class="{1}"><a href="http://yixin.im/#f=www" target="_blank">\u624b\u673a\u53f7\u7801\u5f00\u901a\u6613\u4fe1</a></li>            </ol>        </div>        <div class="yx-intro-qr">            <div class="yx-intro-qr-tip" title="\u4e8c\u7ef4\u7801\u5206\u4eab"></div>            <h3>\u626b\u63cf\u4e8c\u7ef4\u7801\u5206\u4eab</h3>            <div class="yx-intro-qr-img">                <img src="about:blank" data-src="http://yixin.news.163.com/yixin/share/qrcode.b?w=180&h=180&content={2}" width="180" height="180">            </div>        </div>    </div></div>',a.share='<div class="yx-share">    <h3>{0}</h3>    <div class="yx-summary">        <div class="yx-pic" style="\'background-image:" url("http:="" timge8.126.net="" image?h="90&w=90&fill=0&gif=0&quality=80&url={2}")\'"></div>        <p>{1}</p>    </div>    <div class="yx-remark">        <input type="text" class="yx-remark-input" maxlength="300" placeholder="\u8bf4\u70b9\u4ec0\u4e48...">    </div>    <div class="yx-bottom cf">        <div class="yx-mobile">            <span>\u7ed1\u5b9a\u7684\u624b\u673a\u5c3e\u6570\u662f\uff1a<b>{3}</b></span>            <a href="https://reg.163.com/mobilealias/index.do" target="_blank">\u6211\u8981\u4fee\u6539</a>        </div>        <a class="yx-sbtn">\u5206\u4eab\u5230\u6613\u4fe1\u670b\u53cb\u5708</a>    </div></div>',a.msg='<div class="yx-msg">{0}</div>',a.pub='<a href="javascript:void(0);" class="yx-close" target="_self">\xd7</a>';
var c=/P_INFO=([^;=]+);/,u=function(){var e=t.cookie.match(c);return e?e.pop().split("|"):null},l=function(){var e=u();return e?e[0]:null},d={};r._node=t.createElement("div"),r._node.className="yx-box";var f={};f._opened=!1,f._shareOpened=!1,f._init=function(){r._node.innerHTML=""},f._show=function(){!this._opened&&t.body.appendChild(r._node),this._opened=!0},f._hide=function(){this._opened&&t.body.removeChild(r._node),this._opened=!1},f._hideTimer=null,f.hide=function(e){e=e||0,f._hideTimer=setTimeout(function(){f._hide()},1e3*e)},"intro share msg".replace(/[^, ]+/g,function(e){f[e]=function(){this._init(),r._node.className="yx-box yx-status-"+e;var t=a[e]+a.pub,n=s.toArray(arguments);n.unshift(t),r._node.innerHTML=s.format.apply(null,n),this._hideTimer&&clearTimeout(this._hideTimer),this._hide(),this._show(),/MSIE 6/gi.test(navigator.userAgent)&&(r._node.style.top=s.getScrollOffset()[1]+200+"px",r._node.className=r._node.className),"share"===e&&(s.getElementsByClassName("yx-remark-input",r._node,"input")[0].focus(),this._shareOpened=!0)}}),s.addEvent(r._node,"click",function(e){var t=e.target||e.srcElement;t.className.indexOf("yx-close")>=0&&f._hide(),t.className.indexOf("yx-sbtn")>=0&&h()}),s.addEvent(r._node,"mousemove",function(e){var t=e.target||e.srcElement,n="yx-intro-qr-tip";if(t.className.indexOf(n)>=0){var i=s.getElementsByClassName("yx-intro",r._node,"div")[0],o=s.getElementsByClassName(n,i,"div")[0],a=setTimeout(function(){i.className="yx-intro yx-intro-status-qr"},300),c=function(){a&&clearTimeout(a)};s.addEvent(o,"mouseleave",c),s.addEvent(i,"mouseleave",function(){c(),i.className="yx-intro"})}}),s.addEvent(t,"keyup",function(e){27===e.keyCode&&f._opened&&f._hide(),13===e.keyCode&&f._shareOpened&&h()});var h=function(){var t={};s.each(d,function(e,n){t[n]="function"==typeof e?e():e});var n={title:t.title||"",desc:t.desc,image:"http://timge8.126.net/image?h=500&w=500&fill=0&gif=0&quality=80&url="+t.image,url:t.url,source:t.source,ps:s.getElementsByClassName("yx-remark-input",r._node,"input")[0].value,m:l(),c:"yixin_cb_"+s.getUUID()},i=[];s.each(n,function(e,t){i.push(t+"="+encodeURIComponent(e))}),e[n.c]=function(e){1==e.result?f.msg("\u5206\u4eab\u6210\u529f!"):f.msg("\u5206\u4eab\u5931\u8d25, \u8bf7\u7a0d\u5019\u91cd\u8bd5."),"number"==typeof t.closeAfterShare&&t.closeAfterShare>=0?f.hide(t.closeAfterShare):"undefined"==typeof t.closeAfterShare&&f.hide(2)},s.loadJs("http://yixin.news.163.com/yixin/share/addfdfeed.b?"+i.join("&"))},p=function(t){var n={};s.each(t,function(e,t){var i="function"==typeof e?e():e;n[t]=encodeURIComponent(i)});var r="https://open.yixin.im/share?appkey="+i+"&type=webpage&title="+n.title+"&desc="+n.desc+"&pic="+n.image+"&url="+n.url;try{e.open(r,"_blank","width=650,height=500")}catch(o){f.msg("\u5206\u4eab\u5931\u8d25(\u5185\u90e8\u9519\u8bef)"),f.hide(2)}},m=function(e){var t={title:"",desc:"",image:"http://img1.cache.netease.com/f2e/news/commend/images/appicon.png",url:"http://j.news.163.com?f=YixinShare",source:"\u8350\u65b0\u95fb"};return s.each(t,function(n,i){e[i]||(e[i]=t[i])}),e},v=function(t){t=m(t);p(t);var n=t.url.replace("http://","http//snstj.")+"?snstj_yixin";e.neteaseTracker&&e.neteaseTracker(!0,n)};r.bind=function(e,n){if(e){n=n||{};var i=[];if(e.nodeType&&1===e.nodeType)i.push(e);else if(s.isArray(e)&&e.length>0)i=e;else if(s.isNodeList(e)&&e.length>0)i=s.toArray(e);else{if("string"!=typeof e)return;i.push(t.getElementById(e))}s.each(i,function(e){s.addEvent(e,"click",function(e){v(n),e.preventDefault()})})}},r.open=v,e.YixinShare=r}(window,document),bowlder.define("/modules/shares/shares.js",[],function(){function e(e){var t=r.extend({title:document.title,url:location.href,host:location.host,summary:"",pic:"",source:"\u7f51\u6613",sinakey:""},i.shareInfo,window.NTES_SHARE_INFO),n=t.summary||t.title,o=t.desc||(t.pic?'<img src="'+t.pic+'">':"")+n;return/yixin|weixin/.test(e)?{title:t.title,desc:t.summary,image:t.pic,url:t["url_"+e]||t.url,source:t.source}:{host:t.host,title:encodeURIComponent(t.title),summary:encodeURIComponent(n),url:encodeURIComponent(t["url_"+e]||t.url),source:encodeURIComponent(t.source),pic:t.pic,desc:encodeURIComponent(o),sinakey:t.sinakey}}var t,n,i=this,r=bowlder;i.cls={},i.state={qrSize:100};var o=r.template.replace;i.qrcodeFlag=!1;var s={pop:function(e,t){e&&window.open(e),i.onShare&&i.onShare(t)},yixin:function(){window.YixinShare&&YixinShare.open(e("yixin")),this.pop(null,"yixin")},lofter:function(){var t=o("http://www.lofter.com/sharetext/?from=163&title=&source=res/foot-E0bk7ZSrQxeC.js&sourceUrl=&charset=utf-8&content=",e("lofter"));this.pop(t,"lofter")},renren:function(){var t=o("http://widget.renren.com/dialog/share?resourceUrl=%3Fsns_renren&pic=&title=&description=",e("renren"));this.pop(t,"renren")},qzone:function(){var t=o("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=%23sns_qzone&desc=&summary=&title=&site=res/foot-E0bk7ZSrQxeC.js&pics=",e("qzone"));this.pop(t,"qzone")},youdao:function(){var t=o("http://note.youdao.com/memory/?url=%23sns_youdao&title=&summary=&product=res/foot-E0bk7ZSrQxeC.js",e("youdao"));this.pop(t,"youdao")},sina:function(){var t=o("http://service.weibo.com/share/share.php?title=&url=%23sns_weibo&pic=&searchPic=false&",e("sina"));this.pop(t,"sina")},weixin:function(o,s){if(!s&&t&&(s=t.qrcode[0]),!(r.utils.msie<7)&&s){if(r.isdefined(o)||(o=!i.qrcodeflag),o){if(n){if(i.qrcodeflag)return}else n="r.ajax.require("http://img1.cache.netease.com/f2e/libs/qrcode.js").then(function(){var" t="e("weixin"),n=new" qrcode(s,{correctlevel:qrcode.correctlevel.m,text:t.title,width:i.state.qrsize,height:i.state.qrsize,colordark:"#000000",colorlight:"#ffffff"});n.makecode(t.url+"#sns_weixin")});i.qrcodeflag="!0}else" i.qrcodeflag="!1;i.$refresh&&i.$refresh()}}};i.share=function(e){return" s[e]?(s[e].apply(s,[].slice.call(arguments,1)),!1):void="" 0},i.init="function(e){var" o="function(){var" e;r.bind("mouseover",function(){e&&(cleartimeout(e),e="null),r.addClass(i.cls.hover),n.show()}).bind("mouseout",function(){e=setTimeout(function(){r.removeClass(i.cls.hover),n.hide()},250)}),o=null};i.cls&&i.cls.hover?o():i.$watch("scope.cls.hover",function(){i.cls&&i.cls.hover&&o&&(o(),i.$unwatch("scope.cls.hover"))})}}),bowlder.define("/modules/nelogin/checklogin.js",function(){var" e="bowlder,t=function(t){var" a="e.$q.defer();if(n.length&&i.length&&n[0]===i[0])s.nickname=(n[1]||"").replace(/@[^@]+\.com$/i,""),s.avatar=n[4]||"",s.account=n[0],s.avatar90=s.avatar?"http://s.cimg.163.com/i/"+encodeURIComponent(s.avatar.replace(/http:\/\//,""))+".90x500.auto.jpg":"http://img1.cache.netease.com/f2e/news/commend/images/portrait84.png",t&&t(s),a.resolve(s);else{var" c="__userInfo" +(new="" date).gettime();window[c]="function(e){window[c]=null,s.nickname=e&&e.nickname||"",s.avatar=e&&e.tweetProfileImgeUrl||"",s.account=i[0],t&&t(s),a.resolve(s)},e.ajax.require("http://comment.api.163.com/reply/check.jsp?callback="+c)}return" a.promise},n="function(n,i){var" r="document.createElement("div"),o='<iframe" src="javascript:false;" name="changeCookie" frameborder="0" style="width:0;height:0;display:none;">',s=e.$q.defer();r.innerHTML=o;var a=r.firstChild;return document.body.appendChild(a),a.onload=a.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(document.body.removeChild(a),a=null,t(function(e){i&&i(e),s.resolve(e)}))},a.onerror=function(){i&&i(null),s.resolve(null)},a.src=n,s.promise};this.verifyCookie=function(){var t=e.cookie.get("S_INFO"),n=e.cookie.get("P_INFO").split("|");return!!t&&"2"!==n[2]||e.cookie.get("S_OINFO")},this.checkLogin=function(i){var r=e.cookie.get("P_INFO").split("|");return this.verifyCookie()||"1"!==r[2]?(t(i),void 0):(n("http://reg.163.com/chgcookie.jsp?username="+r[0]+"&retUrl=http://www.163.com/special/0077450P/login_frame.html&loginUrl=http://www.163.com/special/0077450P/login_frame.html",i),void 0)},this.checkLoginPromise=function(){var i=e.cookie.get("P_INFO").split("|");return this.verifyCookie()||"1"!==i[2]?t():n("http://reg.163.com/chgcookie.jsp?username="+i[0]+"&retUrl=http://www.163.com/special/0077450P/login_frame.html&loginUrl=http://www.163.com/special/0077450P/login_frame.html")}}),bowlder.define("/products/photoset/mobile/modules/tie/tie.js",["/modules/nelogin/checklogin.js"],function(e){function t(){var e=m.upvoteForm;if(!e){var t=document.createElement("div");t.innerHTML='<iframe src="javascript:false;" name="upvoteIframe" style="display:none;"></iframe><form style="display:none" target="upvoteIframe" method="POST"></form>',c.append(t.firstChild),e=m.upvoteForm=t.firstChild,c.append(e),t=null}return e}function n(){return v.docId?("1"!==l.dataset.tie&&(l.dataset.tie=1,s()),h.ajax.require("http://comment.api.163.com/api/json/thread/total/"+v.boardId+"/"+v.docId+"?jsoncallback=tieCount"),window.tieCount=function(e){delete window.tieCount,h(".js-tiecount").html(e.ptcount||0),p.find(".js-totalcount").html(e.prcount+e.ptcount||0)},void 0):(h(".js-tie-btn-large").html("\u8ddf\u5e16\u5df2\u5173\u95ed"),void 0)}function i(e){var t="";e&&0!==e.length?(p.show(),h.each(e,function(e,n){var i,r,s,a,c;n>4||(s=Object.keys(e),c=e[s[s.length-1]],c.f=c.f.split("\uff1a")[0],r=c.f.split("&nbsp;")[1]||"",i=c.f.split("&nbsp;")[0],a=r&&!/^null/.test(r)?'<i class="icon-avar"></i>'+r+' <span class="comment-addr">['+i+"]</span>\uff1a<time>"+c.t+"</time>":'<i class="icon-avar"></i>'+i+' <span class="comment-ip">ip\uff1a'+c.ip+"</span><time>"+c.t+"</time>",t+='<li>\n  <p class="comment-author">'+a+"</p>\n  "+o(e)+'\n  <p class="comment-content">'+c.b+"</p>\n</li>\n")})):(p.addClass("tie-main-empty"),p.find(".tie-btn-large").html("\u6682\u65e0\u8ddf\u8d34\uff0c\u6b22\u8fce\u4f60\u53d1\u8868\u89c2\u70b9")),p.find(".commentbox-wrap").html(t)}function r(e){0!==e.length&&h.each(e,function(e){var t=Object.keys(e),n=t.splice(-1)[0],i=e.post=e[n];e.authorName=i.f.split("&nbsp;")[1]||"",e.authorAddr=i.f.split("&nbsp;")[0],/^null/.test(e.authorName)&&(e.authorName=""),i.f=i.f.split("\uff1a")[0],e.commentBox=o(e,t),f.hotPosts.push(e)}),e.length<5&&(v.hasmore=!1)}function o(e,t){var="" n="" ,i="" ,r="5;return" h.each(t,function(o,s){var="" a="e[o];n+=0===s&&t.length">r?'<div class="comment-box js-first">\n  <div class="comment-box">\n    <p class="comment-author">'+a.f+'</p>\n    <p class="comment-content">'+a.b+'</p>\n  </div>\n  <p><a class="js-unfold comment-unfold" href="javascript:" target="_blank" rel="external">\u5df2\u7ecf\u9690\u85cf'+(t.length-1)+'\u4e2a\u8ddf\u8d34 \u70b9\u51fb\u5c55\u5f00</a></p>\n</div>\n<div class="comment-box net-hide">':'<div class="comment-box">',i+='<p class="comment-author">'+a.f+'<span class="comment-index">'+(s+1)+'</span></p>\n  <p class="comment-content">'+a.b+"</p>\n</div>"}),n+i}function s(e,t){if(!y&&v.docId){y=!0,h.isNumber(e)&&(v.start=e),h.isNumber(t)&&(v.size=t);var n=h.template.replace("http://comment.api.163.com/api/jsonp/post/list/hot///////?jsoncallback=tieCallback",v);h.ajax.require(n),window.tieCallback=function(e){var t;delete window.tieCallback,t=e.hotPosts||[],p[0]&&0===v.start&&i(t),r(t),f.callback&&f.callback(t),y=!1,f.$refresh()}}}var a,c,u,l,d,f=this,h=bowlder,p=h("#tieMainBody"),m={},v=f.state={boardId:h("#boardId").val(),docId:h("#docId").val(),inReply:!1,hasMore:!0,hidenCondition:10,hiddenStart:0,hiddenEnd:0,commentHtml:"<li>\u8ddf\u8d34\u52a0\u8f7d\u4e2d...</li>",start:0,size:10,cursor:0,pages:50};f.hotPosts=[];var g;f.hideTie=function(){g||h.emit("sidebar.tie.hide")},f.openTie=function(){if(!v.boardId||!v.docId)return alert("\u8ddf\u8d34\u5df2\u5173\u95ed"),void 0;e.checkLogin(function(e){if(e&&e.logined)v.logined=!0,v.username=e.nickname,v.myreply="http://tie.163.com/reply/myaction.jsp?action=reply2me&username="+e.userName;else if(v.logined=!1,v.username="",e.userMail){if(a.replyLoginForm){var t=a.replyLoginForm[0].username;t&&""===t.value&&(t.value=e.userMail)}if(a.publishLoginForm){var t=a.publishLoginForm[0].username;t&&""===t.value&&(t.value=e.userMail)}}f.$refresh()}),"1"!==l.dataset.tie&&(l.dataset.tie=1,s()),g=!0,setTimeout(function(){g=!1},500),h.emit("sidebar.tie.show");try{window.neteaseTracker&&neteaseTracker(!1,"http://mobiapt."+location.hostname+location.pathname+"#comment","","mobiapt")}catch(t){console.warn("\u8ddf\u8d34\u7edf\u8ba1\u51fa\u9519\uff01")}},f.showReply=function(e){e.parentNode.parentNode.appendChild(d),f.replying=!0,a.replyForm[0].quote.value=e.dataset.postid||"",f.$refresh()},f.publishTie=function(){var e=v.inReply?a.replyForm:a.publishForm;v.inReply=!1;var t=e.find("textarea").val();return""===t.trim()?(alert("\u968f\u4fbf\u5199\u70b9\u4ec0\u4e48\u5427~"),void 0):(e[0].submit(),window.replyCallback=function(){var e;delete window.replyCallback,c.find(".my-comment").removeClass("net-hide"),e=new Date,c.find(".my-comment ul")[0].innerHTML+='<li>\n  <p class="my-comment-time">'+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+"</p>\n  <p>"+t+"</p>\n</li>",c.find("textarea").val(""),f.replying=!1,f.$refresh()},void 0)},f.stat=function(){try{window.neteaseTracker&&neteaseTracker(!1,"http://mobiapt."+location.hostname+location.pathname+"#comment","","mobiapt")}catch(e){console.warn("\u8ddf\u8d34\u7edf\u8ba1\u51fa\u9519\uff01")}};var y;f.init=function(i){var r;a=i.roles,c=a.tieWrap,l=c[0],u=a.replyWrap,d=u[0];var o=function(){var e=l.scrollTop,t=l.children[0].offsetHeight;v.hasMore&&t-e-window.screen.height<30&&(v.cursor++,s(10*v.cursor),v.cursor>=v.pages&&(v.hasMore=!1))};p[0]&&n(),h.on("tie.open",f.openTie),c.bind("scroll",o).bind("touchstart",function(e){r=e.pageY}).bind("touchmove",function(e){r&&r-e.pageY>5&&(o(),r=e.pageY)}),function(){var n=function(e,n){var i=t();i.action="http://comment.news.163.com/reply/upvote/"+e+"/"+n,i.submit()};window.loginCallback=function(){e.checkLogin(function(e){e&&e.logined?(v.logined=!0,v.username=e.nickname,v.myreply="http://tie.163.com/reply/myaction.jsp?action=reply2me&username="+e.userName,f.publishTie()):(v.logined=!1,v.username="",alert("\u767b\u5f55\u5931\u8d25")),f.$refresh()})};var i=function(){window.scroll(0,1)};c.find("textarea").bind("focus",function(){c.find(".comment-publish").addClass("active")}).bind("blur",i),u.find('textarea,[type="email"],[type="password"]').bind("blur",i),c.delegate("click",{".js-upvote":function(e){var t,i=(e.target,this),r=i.classList;r.contains("disabled")||(n(v.boardId,e.target.dataset.postid),t=i.getElementsByClassName("js-comment-vote")[0],t.textContent=+t.textContent+1,i.childNodes[0].textContent="\u5df2\u9876",r.add("disabled"))},".js-reply":function(){f.showReply(this)},".js-login":function(){this.classList.contains("in-reply")&&(v.inReply=!0,a[this.dataset.form].submit())},".js-publish":function(){this.classList.contains("in-reply")&&(v.inReply=!0),f.publishTie(this)},".js-unfold":function(){var e=this.parentElement.parentElement;e.nextElementSibling.classList.remove("net-hide"),e.parentElement.removeChild(e)}})}()}}),bowlder.define("/products/photoset/mobile/plugin/gesture.js",function(){function e(){if(i){if(h.dx){var e=(+new Date-h.speedTimer)/1e3;h.speedX=(i.dx-h.dx)/e,h.speedY=(i.dy-h.dy)/e}a.extend(h,{speedTimer:+new Date,dx:i.dx,dy:i.dy})}}function t(e,t){return Math.sqrt(Math.pow(e.pageX-t.pageX,2)+Math.pow(e.pageY-t.pageY,2))}var n,i,r,o,s,a=bowlder,c=a(document),u=navigator.userAgent.toLowerCase(),l=/android|ipad|ipod|blackberry|bb\d+|mobile|phone/.test(u),d={click:"click",mousedown:"touchstart",mouseup:"touchend",mouseover:"touchstart",mouseout:"touchend",mousemove:"touchmove"},f=function(e){return l?d[e]:e},h={};a.event("tap",function(e){var t=this;a.dom.bind(t,f("mousedown"),function(n){o||(o={node:t,x:n.clientX,y:n.clientY,distanceX:0,distanceY:0,fire:e})})}),a.event("pinch",function(e){var n=this;a.dom.bind(n,"touchstart",function(i){if(i.touches[0]&&i.touches[1]&&!s){var r={pageX:(i.touches[0].pageX+i.touches[1].pageX)/2,pageY:(i.touches[0].pageY+i.touches[1].pageY)/2};s={node:n,center:r,distance1:t(r,i.touches[0]),distance2:t(r,i.touches[1]),fire:e}}})}),a.event("swipe",function(e){var t=this;a.dom.bind(t,f("mousedown"),function(i){n||s||(n={node:t,x:i.clientX,y:i.clientY,fire:e})})}),a.event("swiping",function(e){var t=this;a.dom.bind(t,f("mousedown"),function(n){i||s||(i={node:t,startTime:+new Date,x:n.clientX,y:n.clientY,fire:e})})}),a.event("longpress",function(e){var t=this;a.dom.bind(t,f("mousedown"),function(n){r||(r={node:t,stime:+new Date,distanceX:0,distanceY:0,x:n.clientX,y:n.clientY,fire:e})}),a.dom.bind(t,"contextmenu",function(e){e.preventDefault()})}),c.bind(f("mousemove"),function(c){var u=c.touches&&c.touches[0]?document.elementFromPoint(c.touches[0].pageX,c.touches[0].pageY):c.target;h.interval||(h.interval=setInterval(e,100),h.speedTimer=+new Date),(a.freezeScroll||a.fullscreen)&&c.preventDefault();var l=c.clientX,d=c.clientY;if(i&&+new Date-i.startTime>60){var f=l-i.x,p=d-i.y,m=Math.abs(f)>Math.abs(p)?f>0?"right":"left":p>0?"down":"up";i.fire({direction:m,speedX:h.speedX,speedY:h.speedY,dx:i.dx=f,dy:i.dy=p},u)}if(r&&(r.distanceX+=Math.abs(l-r.x),r.x=l,r.distanceY+=Math.abs(d-r.y),r.y=d),o&&(o.distanceX+=Math.abs(l-o.x),o.x=l,o.distanceY+=Math.abs(d-o.y),o.y=d),s&&c.changedTouches[0]&&c.changedTouches[1]){var v=s.center,g=t(c.changedTouches[0],v)-s.distance1,y=t(c.changedTouches[1],v)-s.distance2;(s.zoom||Math.abs(g)>3&&Math.abs(y)>3&&g*y>0)&&(s.zoom=1+(g+y)/(s.distance1+s.distance2+100),s.fire({ending:!1,zoom:s.zoom}),n=i=null,n&&(n.x=l,n.y=d))}}),c.bind(f("mouseup"),function(e){a.freezeScroll&&e.preventDefault(),a.freezeScroll=!1,s&&s.zoom&&s.fire({ending:!0,zoom:s.zoom}),s=i=null;var t=this,c=e.clientX,u=e.clientY,l=+new Date,d=e.target;if(r){var f=l-r.stime;f>=600&&Math.abs(r.distanceX)<4&&math.abs(r.distancey)<4&&(t.longpressed=!0,settimeout(function(){t.longpressed=!1},300),e.preventdefault(),r.fire(),o=null),r=null}if(n){if(!t.longpressed){var p="c-n.x,m=u-n.y,v=Math.abs(m)/Math.abs(p)">Math.tan(7*Math.PI/18),g=v?m>0?"down":"up":p>0?"right":"left",y=v?Math.abs(m):Math.abs(p);if(Math.abs(p)>20||Math.abs(m)>20){if(!a.isDefined(h.speedX)){var b=(+new Date-h.speedTimer)/1e3;h.speedX=p/b,h.speedY=m/b}n.fire({fireTarget:d,direction:g,distance:y,speedX:h.speedX,speedY:h.speedY,dx:p,dy:m},d),o=null}}n=null}if(o){if(!t.longPressed&&Math.abs(o.distanceX)<20&&math.abs(o.distancey)<20){var w="o;w.fire({fireTarget:d},d)}o=null}h.interval&&(clearInterval(h.interval),h={})})}),bowlder.define("/modules/mobile/sidebar.js",function(){var" e,t,n,i="this.state,r=this.$root,o=bowlder,s=o(document.body),a=o.extend({position:"left",activeCls:"net-active",fixedBodyCls:"net-fixed-body",hideCls:"net-hide"},i),c="sidebar."+(i.name||a.position),u=function(){n||(t&&clearTimeout(t),r.removeClass(a.activeCls),r[0].offsetWidth,t=setTimeout(function(){r.addClass(a.hideCls),s.css({top:0}).removeClass(a.fixedBodyCls),document.body.scrollTop=e,document.documentElement.scrollTop=e},400))},l=function(){n=!0,setTimeout(function(){n=!1},400),t&&(clearTimeout(t),t=null),r.removeClass(a.hideCls),e=document.body.scrollTop||document.documentElement.scrollTop,r[0].offsetWidth,setTimeout(function(){r.addClass(a.activeCls)},50),setTimeout(function(){s.css({top:-e}).addClass(a.fixedBodyCls)},500)};r.bind("swipe",function(e){var" t="Math.abs("left"==a.position||"right"==a.position?e.dx:e.dy);e.direction==a.position&&t">50&&u()}).bind(i.event||"click",function(e){e.target==this&&u()}),o.on(c+".show",function(){l()}),o.on(c+".hide",function(){u()})});</20&&math.abs(o.distancey)<20){var></4&&math.abs(r.distancey)<4&&(t.longpressed=!0,settimeout(function(){t.longpressed=!1},300),e.preventdefault(),r.fire(),o=null),r=null}if(n){if(!t.longpressed){var></30&&(v.cursor++,s(10*v.cursor),v.cursor></div></5&&(v.hasmore=!1)}function></7)&&s){if(r.isdefined(o)||(o=!i.qrcodeflag),o){if(n){if(i.qrcodeflag)return}else></arguments.length;n+=1){var></400?h[0].appendchild(p[0]):i.appendchild(p[0])}},d=function(){if(!k.fixedh){var></_.list.length){t&&_.curlist.length?_.curlist[1==t?2:0]=_.list[e]:(_.curlist[0]=a(e-1),_.curlist[1]=a(e),e></e.width)&&(n=r*n></math.min(5,o.length);c++){if(t&&4==c){n||(s+='<div></=arguments.length?a.call(arguments,2):[];return></s.length;i++)if(n.$target=s[i].target,t=j(s[i].evt,n,!0),t===!1){e.preventdefault();break}return></o.length;t++)if(o[t]==n){o.splice(t,1);break}var></this.$$watchs.length;i++){var></t.options.length;)t.remove(s);b(t,r,e)};o.$watch(n,a,e),i["ne-destroy"].push(function(){o.$unwatch(n,a,e)})}},"ne-foreach":function(e,t,n,i){var></%([\s\s]+?)%></t.length;i++)if(t[i].item==e){if(t[i].string==n)return></")),t[5])break}else></this.length;r++)b.css(this[r],e,t);return></=arguments.length?b.call(arguments,0):[],t=e.shift();if(c(t)){var></(\w+)></s[t].length;r++)s[t][r]==n&&s[t].splice(r--,1)}})):w(t.split(a),function(t){t&&(w(s[t],function(n){b._off(e,t,n,i)}),delete></t[n].length;r++)if(t[n][r]==i){t[n].splice(r,1);break}0===t[n].length&&delete>